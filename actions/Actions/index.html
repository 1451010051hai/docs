<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="fastlane team">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Actions - fastlane docs</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../css/fabric.css" rel="stylesheet">
  <link href="../../css/fastlane.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Actions";
    var mkdocs_page_input_path = "actions/Actions.md";
    var mkdocs_page_url = "/actions/Actions/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> fastlane docs</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Home</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Getting Started</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../getting-started/setup/">Setup</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../getting-started/screenshots/">Screenshots</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../getting-started/beta-deployment/">Beta Deployment</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../getting-started/appstore-deployment/">App Store Deployment</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">Actions</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#actions">Actions</a></li>
                
                    <li><a class="toctree-l4" href="#building">Building</a></li>
                
                    <li><a class="toctree-l4" href="#testing">Testing</a></li>
                
                    <li><a class="toctree-l4" href="#deploying">Deploying</a></li>
                
                    <li><a class="toctree-l4" href="#modifying-project">Modifying Project</a></li>
                
                    <li><a class="toctree-l4" href="#update_info_plist">update_info_plist</a></li>
                
                    <li><a class="toctree-l4" href="#update_url_schemes">update_url_schemes</a></li>
                
                    <li><a class="toctree-l4" href="#developer-portal">Developer Portal</a></li>
                
                    <li><a class="toctree-l4" href="#using-git">Using git</a></li>
                
                    <li><a class="toctree-l4" href="#using-mercurial">Using mercurial</a></li>
                
                    <li><a class="toctree-l4" href="#notifications">Notifications</a></li>
                
                    <li><a class="toctree-l4" href="#other">Other</a></li>
                
                    <li><a class="toctree-l4" href="#misc">Misc</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../FAQs/">FAQs</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Codesigning</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../codesigning/GettingStarted/">Getting Started</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../codesigning/XcodeProject/">Xcode Project</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../codesigning/Troubleshooting/">Troubleshooting</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Plugins</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/AvailablePlugins/">AvailablePlugins</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/CreatePlugin/">Create your own plugin</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/PluginsTroubleshooting/">Plugins Troubleshooting</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Best Practices</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../best-practices/Gitignore/">Gitignore</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../best-practices/ContinuousIntegration/">Continuous Integration</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../Advanced/">Advanced</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Contributing</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../contributing/UI/">UI</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../contributing/CONTRIBUTING/">Contribution Guidelines</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">fastlane docs</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
    
    <li>Actions</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="actions">Actions</h1>
<p>There are lots of predefined <code>fastlane</code> actions you can use. If you have ideas for more, please <a href="https://github.com/fastlane/fastlane/issues/new">let me know</a>.</p>
<p>To get the most up-to-date information from the command line on your current version you can also run:</p>
<pre><code class="sh">fastlane actions: List all available fastlane actions
fastlane action [action_name]:
</code></pre>

<p>You can import another <code>Fastfile</code> by using the <code>import</code> action. This is useful if you have shared lanes across multiple apps and you want to store a <code>Fastfile</code> in a separate folder. The path must be relative to the <code>Fastfile</code> this is called from.</p>
<pre><code class="ruby">import './path/to/other/Fastfile'
</code></pre>

<ul>
<li><a href="#building">Building</a></li>
<li><a href="#testing">Testing</a></li>
<li><a href="#deploying">Deploying</a></li>
<li><a href="#modifying-project">Modifying Project</a></li>
<li><a href="#developer-portal">Developer Portal</a></li>
<li><a href="#using-git">Using git</a></li>
<li><a href="#using-mercurial">Using mercurial</a></li>
<li><a href="#notifications">Notifications</a></li>
<li><a href="#misc">Misc</a></li>
</ul>
<h2 id="building">Building</h2>
<h3 id="bundler"><a href="http://bundler.io/">Bundler</a></h3>
<p>This will install your Gemfile by executing <code>bundle install</code></p>
<pre><code class="ruby">bundle_install
</code></pre>

<h3 id="cocoapods"><a href="http://cocoapods.org">CocoaPods</a></h3>
<p>If you use <a href="http://cocoapods.org">CocoaPods</a> you can use the <code>cocoapods</code> integration to run <code>pod install</code> before building your app.</p>
<pre><code class="ruby">cocoapods # this will run pod install
</code></pre>

<h3 id="carthage"><a href="https://github.com/Carthage/Carthage">Carthage</a></h3>
<p>This will execute <code>carthage bootstrap</code></p>
<pre><code class="ruby">carthage
</code></pre>

<p>More options are available:</p>
<pre><code class="ruby">carthage(
  command: &quot;bootstrap&quot;                            # One of: build, bootstrap, update, archive. (default: bootstrap)
  dependencies: ['Alamofire', 'Notice'],          # Specify which dependencies to update (only for the update command)
  use_ssh: false,                                 # Use SSH for downloading GitHub repositories.
  use_submodules: false,                          # Add dependencies as Git submodules.
  use_binaries: true,                             # Check out dependency repositories even when prebuilt frameworks exist
  no_build: false,                                # When bootstrapping Carthage do not build
  no_skip_current: false,                         # Don't skip building the current project (only for frameworks)
  verbose: false,                                 # Print xcodebuild output inline
  platform: &quot;all&quot;,                                # Define which platform to build for (one of ‘all’, ‘Mac’, ‘iOS’, ‘watchOS’, 'tvOS', or comma-separated values of the formers except for ‘all’)
  configuration: &quot;Release&quot;,                       # Build configuration to use when building
  toolchain: &quot;com.apple.dt.toolchain.Swift_2_3&quot;   # Specify the xcodebuild toolchain
)
</code></pre>

<h3 id="gym"><a href="https://github.com/fastlane/fastlane/tree/master/gym">gym</a></h3>
<p><code>gym</code> builds and packages iOS apps for you. It takes care of all the heavy lifting and makes it super easy to generate a signed <code>ipa</code> file.</p>
<pre><code class="ruby">gym(scheme: &quot;MyApp&quot;, workspace: &quot;MyApp.xcworkspace&quot;)
</code></pre>

<p>There are many more options available, you can use <code>gym --help</code> to get the latest list of available options.</p>
<pre><code class="ruby">gym(
  workspace: &quot;MyApp.xcworkspace&quot;,
  configuration: &quot;Debug&quot;,
  scheme: &quot;MyApp&quot;,
  silent: true,
  clean: true,
  output_directory: &quot;path/to/dir&quot;, # Destination directory. Defaults to current directory.
  output_name: &quot;my-app.ipa&quot;,       # specify the name of the .ipa file to generate (including file extension)
  sdk: &quot;10.0&quot;                     # use SDK as the name or path of the base SDK when building the project.
)
</code></pre>

<p>Use <code>gym --help</code> to get all available options.</p>
<p>The alternative to <code>gym</code> is <a href="#ipa"><code>ipa</code></a> which uses <a href="https://github.com/nomad/shenzhen">shenzhen</a> under the hood.</p>
<h3 id="gradle">gradle</h3>
<p>You can use the <code>gradle</code> action to integrate your gradle tasks into <code>fastlane</code>.</p>
<p>Simple usage:</p>
<pre><code class="ruby">gradle(
  task: 'assemble',
  flavor: 'WorldDomination',
  build_type: 'Release'
)
</code></pre>

<p>In case of an <code>assemble</code> task, the signed apk path is accessible in: <code>lane_context[Actions::SharedValues::GRADLE_APK_OUTPUT_PATH]</code></p>
<p>You can pass <a href="https://docs.gradle.org/current/userguide/build_environment.html">gradle properties</a>:</p>
<pre><code class="ruby">gradle(
  # ...

  properties: {
    'versionCode' =&gt; 100,
    'versionName' =&gt; '1.0.0',
    # ...
  }
)
</code></pre>

<p>If you need to pass sensitive information through the <code>gradle</code> action, and don't want the generated command to be printed before it is run, you can suppress that:</p>
<pre><code class="ruby">gradle(
  # ...
  print_command: false
)
</code></pre>

<p>You can also suppress printing the output generated by running the generated Gradle command:</p>
<pre><code class="ruby">gradle(
  # ...
  print_command_output: false
)
</code></pre>

<p>To pass any other CLI flags to gradle use:</p>
<pre><code class="ruby">gradle(
  # ...

  flags: &quot;--exitcode --xml file.xml&quot;
)
</code></pre>

<h3 id="verify_xcode">verify_xcode</h3>
<p>Verifies that the Xcode installation is properly signed by Apple. This is relevant after recent <a href="http://researchcenter.paloaltonetworks.com/2015/09/novel-malware-xcodeghost-modifies-xcode-infects-apple-ios-apps-and-hits-app-store/">attacks targeting Xcode</a>.</p>
<p>Add this action to your <code>appstore</code> lane. Keep in mind this action might take several minutes to be completed.</p>
<pre><code class="ruby">verify_xcode
</code></pre>

<h3 id="screengrab"><a href="https://github.com/fastlane/fastlane/tree/master/screengrab">screengrab</a></h3>
<p><code>screengrab</code> automates taking localized screenshots of your Android app on every device</p>
<pre><code class="ruby">screengrab
</code></pre>

<p>Other options (<code>screengrab --help</code>)</p>
<pre><code class="ruby">screengrab(
  locales: ['en-US', 'fr-FR', 'ja-JP'],
  clear_previous_screenshots: true,
  app_apk_path: 'build/outputs/apk/example-debug.apk',
  tests_apk_path: 'build/outputs/apk/example-debug-androidTest-unaligned.apk'
)
</code></pre>

<h3 id="snapshot"><a href="https://github.com/fastlane/fastlane/tree/master/snapshot">snapshot</a></h3>
<pre><code class="ruby">snapshot
</code></pre>

<p>Other options (<code>snapshot --help</code>)</p>
<pre><code class="ruby">snapshot(
  skip_open_summary: true,
  clean: true
)
</code></pre>

<p>Take a look at the <a href="https://github.com/fastlane/fastlane/tree/master/snapshot#prefilling">prefilling data guide</a> on the <code>snapshot</code> documentation.</p>
<h3 id="clear_derived_data">clear_derived_data</h3>
<p>Clears the Xcode Derived Data at path <code>~/Library/Developer/Xcode/DerivedData</code></p>
<pre><code class="ruby">clear_derived_data
</code></pre>

<h3 id="ipa">ipa</h3>
<p><strong>Note</strong>: This action is deprecated, use <a href="https://github.com/fastlane/fastlane/tree/master/gym">gym</a> instead.</p>
<p>Build your app right inside <code>fastlane</code> and the path to the resulting ipa is automatically available to all other actions.</p>
<p>You should check out the <a href="https://github.com/fastlane/fastlane/tree/master/fastlane/docs/Codesigning">code signing guide</a>.</p>
<pre><code class="ruby">ipa(
  workspace: &quot;MyApp.xcworkspace&quot;,
  configuration: &quot;Debug&quot;,
  scheme: &quot;MyApp&quot;,
  # (optionals)
  clean: true,                     # This means 'Do Clean'. Cleans project before building (the default if not specified).
  destination: &quot;path/to/dir&quot;,      # Destination directory. Defaults to current directory.
  ipa: &quot;my-app.ipa&quot;,               # specify the name of the .ipa file to generate (including file extension)
  xcargs: &quot;MY_ADHOC=0&quot;,            # pass additional arguments to xcodebuild when building the app.
  embed: &quot;my.mobileprovision&quot;,     # Sign .ipa file with .mobileprovision
  identity: &quot;MyIdentity&quot;,          # Identity to be used along with --embed
  sdk: &quot;10.0&quot;,                     # use SDK as the name or path of the base SDK when building the project.
  archive: true                    # this means 'Do Archive'. Archive project after building (the default if not specified).
)
</code></pre>

<p>The <code>ipa</code> action uses <a href="https://github.com/nomad/shenzhen">shenzhen</a> under the hood.</p>
<p>The path to the <code>ipa</code> is automatically used by <code>Crashlytics</code>, <code>Hockey</code> and <code>DeployGate</code>.</p>
<p><strong>Important:</strong></p>
<p>To also use it in <code>deliver</code>, update your <code>Deliverfile</code> and remove all code in the <code>Building and Testing</code> section, in particular all <code>ipa</code> and <code>beta_ipa</code> blocks.</p>
<p>See how <a href="https://github.com/fastlane/examples/blob/master/ProductHunt/Fastfile">Product Hunt</a> uses the <code>ipa</code> action.</p>
<h3 id="update_project_provisioning">update_project_provisioning</h3>
<p>You should check out the <a href="https://github.com/fastlane/fastlane/tree/master/fastlane/docs/Codesigning">code signing guide</a> before using this action.</p>
<p>Updates your Xcode project to use a specific provisioning profile for code signing, so that you can properly build and sign the .ipa file using the <a href="#ipa">ipa</a> action or a CI service.</p>
<p>Since you have to use different provisioning profiles for various targets (WatchKit, Extension, etc.) and configurations (Debug, Release) you can use the <code>target_filter</code> and <code>build_configuration</code> options:</p>
<pre><code class="ruby">update_project_provisioning(
  xcodeproj: &quot;Project.xcodeproj&quot;,
  profile: &quot;./watch_app_store.mobileprovision&quot;, # optional if you use sigh
  target_filter: &quot;.*WatchKit Extension.*&quot;, # matches name or type of a target
  build_configuration: &quot;Release&quot;
)
</code></pre>

<p>The <code>target_filter</code> and <code>build_configuration</code> options use standard regex, so if you want an exact match for a target, use <code>^MyTargetName$</code> to prevent a match for the <code>Pods - MyTargetName</code> target, for instance.</p>
<p><strong><a href="https://github.com/fastlane/examples/blob/4fea7d2f16b095e09af409beb4da8a264be2301e/MindNode/Fastfile#L5-L47">Example Usage at MindNode</a></strong></p>
<h3 id="update_app_group_identifiers">update_app_group_identifiers</h3>
<p>Updates the App Group Identifiers in the given Entitlements file, so you can have app groups for the app store build and app groups for an enterprise build.</p>
<pre><code class="ruby">update_app_group_identifiers(
    entitlements_file: '/path/to/entitlements_file.entitlements',
    app_group_identifiers: ['group.your.app.group.identifier'])
</code></pre>

<h3 id="update_icloud_container_identifiers">update_icloud_container_identifiers</h3>
<p>Updates the iCloud Container Identifiers in the given Entitlements file, so you can use different iCloud containers for different builds like Adhoc, App Store, etc.</p>
<pre><code class="ruby">update_icloud_container_identifiers(
  entitlements_file: '/path/to/entitlements_file.entitlements',
  icloud_container_identifiers: ['iCloud.com.companyname.appname']
)
</code></pre>

<h3 id="ensure_xcode_version">ensure_xcode_version</h3>
<p>Makes sure a specific version of Xcode is selected to be used to build.
You can use <code>ensure_xcode_version</code> to ensure that a beta version of Xcode is not accidentally selected to build, which would make uploading to TestFlight fail.</p>
<pre><code class="ruby">ensure_xcode_version(version: &quot;7.2&quot;)
</code></pre>

<h3 id="xcode_install"><a href="https://github.com/neonichu/xcode-install">xcode_install</a></h3>
<p>Makes sure a specific version of Xcode is installed. If that's not the case, it will automatically be downloaded by the <a href="https://github.com/neonichu/xcode-install">xcode_install</a> gem.</p>
<p>This will make sure to use the correct Xcode for later actions.</p>
<pre><code class="ruby">xcode_install(version: &quot;7.1&quot;)
</code></pre>

<h3 id="xcversion">xcversion</h3>
<p>Finds and selects a version of an installed Xcode that best matches the provided <a href="http://www.rubydoc.info/github/rubygems/rubygems/Gem/Version"><code>Gem::Version</code> requirement specifier</a>.</p>
<pre><code class="ruby">xcversion version: &quot;7.1&quot; # Selects Xcode 7.1.0
xcversion version: &quot;~&gt; 7.1.0&quot; # Selects the latest installed version from the 7.1.x set
</code></pre>

<h3 id="xcode_select"><a href="https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/xcode-select.1.html">xcode_select</a></h3>
<p>Select and build with the Xcode installed at the provided path. Use the <code>xcversion</code> action if you want to select an Xcode based on a version specifier or you don't have known, stable paths as may happen in a CI environment.</p>
<pre><code class="ruby">xcode_select &quot;/Applications/Xcode6.1.app&quot;
</code></pre>

<h3 id="resign"><a href="https://github.com/fastlane/fastlane/tree/master/sigh#resign">resign</a></h3>
<p>This will resign an ipa with another signing identity and provisioning profile.</p>
<p>If you have used the <code>ipa</code> and <code>sigh</code> actions, then this action automatically gets the <code>ipa</code> and <code>provisioning_profile</code> values respectively from those actions and you don't need to manually set them (although you can always override them).</p>
<pre><code class="ruby">resign(
  ipa: 'path/to/ipa', # can omit if using the `ipa` action
  signing_identity: 'iPhone Distribution: Luka Mirosevic (0123456789)',
  provisioning_profile: 'path/to/profile', # can omit if using the `sigh` action
)
</code></pre>

<p>You may provide multiple provisioning profiles if the application contains nested applications or app extensions, which need their own provisioning profile. You can do so by passing an array of provisioning profile strings or a hash that associates provisioning profile values to bundle identifier keys.</p>
<pre><code class="ruby">resign(
  ipa: 'path/to/ipa', # can omit if using the `ipa` action
  signing_identity: 'iPhone Distribution: Luka Mirosevic (0123456789)',
  provisioning_profile: {
    'com.example.awesome-app' =&gt; 'path/to/profile',
    'com.example.awesome-app.app-extension' =&gt; 'path/to/app-extension/profile'
  }
)
</code></pre>

<h3 id="create_keychain"><code>create_keychain</code></h3>
<p>Create a new keychain, which can then be used to import certificates.</p>
<pre><code class="ruby">create_keychain(
  name: &quot;KeychainName&quot;,
  default_keychain: true,
  unlock: true,
  timeout: 3600,
  lock_when_sleeps: true
)
</code></pre>

<h3 id="unlock_keychain"><code>unlock_keychain</code></h3>
<p>Unlock an existing keychain and add it to the keychain search list.</p>
<pre><code class="ruby">unlock_keychain(
  path: &quot;/path/to/KeychainName.keychain&quot;,
  password: &quot;mysecret&quot;
)
</code></pre>

<p>By default the keychain is added to the existing. To replace them with the selected keychain you may use <code>:replace</code>.</p>
<pre><code class="ruby">unlock_keychain(
  path: &quot;/path/to/KeychainName.keychain&quot;,
  password: &quot;mysecret&quot;,
  add_to_search_list: :replace # To only add a keychain use `true` or `:add`.
)
</code></pre>

<p>In addition, the keychain can be selected as a default keychain.</p>
<pre><code class="ruby">unlock_keychain(
  path: &quot;/path/to/KeychainName.keychain&quot;,
  password: &quot;mysecret&quot;,
  set_default: true
)
</code></pre>

<p>If the keychain file is located in the standard location <code>~/Library/Keychains</code>, then it is sufficient to provide the keychain file name, or file name with its suffix.</p>
<pre><code class="ruby">unlock_keychain(
  path: &quot;KeychainName&quot;,
  password: &quot;mysecret&quot;
)
</code></pre>

<h3 id="get_ipa_info_plist_value"><code>get_ipa_info_plist_value</code></h3>
<p>Returns a value from Info.plist inside a .ipa file</p>
<pre><code class="ruby">get_ipa_info_plist_value(ipa: &quot;path.ipa&quot;, key: &quot;KEY_YOU_READ&quot;)
</code></pre>

<h3 id="delete_keychain"><code>delete_keychain</code></h3>
<p>Delete a keychain, can be used after creating one with <code>create_keychain</code>.</p>
<pre><code class="ruby">delete_keychain(name: &quot;KeychainName&quot;)
</code></pre>

<h3 id="import_certificate"><code>import_certificate</code></h3>
<p>Import certificates into the current default keychain. Use <code>create_keychain</code> to create a new keychain.</p>
<pre><code class="ruby">import_certificate certificate_path: &quot;certs/AppleWWDRCA.cer&quot;
import_certificate certificate_path: &quot;certs/dist.p12&quot;, certificate_password: ENV['CERT_PASSWORD']
</code></pre>

<h3 id="xcodebuild"><a href="https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/xcodebuild.1.html">xcodebuild</a></h3>
<p><strong>Note</strong>: <code>xcodebuild</code> is a complex command, so it is recommended to use <a href="https://github.com/fastlane/fastlane/tree/master/gym">gym</a> for building your ipa file and <a href="https://github.com/fastlane/fastlane/tree/master/scan">scan</a> for testing your app instead.</p>
<p>Make sure to also read the <a href="https://github.com/fastlane/fastlane/tree/master/fastlane/docs/Codesigning">code signing guide</a>.</p>
<pre><code class="ruby"># Create an archive. (./build-dir/MyApp.xcarchive)
xcodebuild(
  archive: true,
  archive_path: './build-dir/MyApp.xcarchive',
  scheme: 'MyApp',
  workspace: 'MyApp.xcworkspace'
)
</code></pre>

<p><code>build_settings</code> are variables which are exposed inside the build process as ENV variables, and can be used to override project settings, or dynamically set values inside a Plist.</p>
<p><code>output_style</code> sets the output format of the console output. Supported options are: 1) <code>:standard</code>, this is the default and will output pretty colored UTF8, and 2) <code>:basic</code>, which will output monochrome ASCII, useful for a CI environment like TeamCity that doesn't support color/UTF8.</p>
<pre><code class="ruby">xcodebuild(
  workspace: &quot;...&quot;,
  scheme: &quot;...&quot;,
  build_settings: {
    &quot;CODE_SIGN_IDENTITY&quot; =&gt; &quot;iPhone Developer: ...&quot;,
    &quot;PROVISIONING_PROFILE&quot; =&gt; &quot;...&quot;,
    &quot;JOBS&quot; =&gt; 16
  },
  output_style: :basic
)
</code></pre>

<p>To keep your Fastfile lightweight, there are also alias actions available for
the most common <code>xcodebuild</code> operations: <code>xcarchive</code>, <code>xcbuild</code>, <code>xcclean</code>, <code>xctest</code> &amp; <code>xcexport</code>.</p>
<p>To export the IPA files using <code>xcodebuild</code> you can provide <code>:export_options_plist</code> as a path to plist file or as a hash of values. To get the list of available keys and values please read help page: <code>xcodebuild --help</code>:</p>
<pre><code class="ruby">xcexport(
  archive_path: &quot;...&quot;,
  export_options_plist: &quot;/path/to/export_options.plist&quot;
)

# or
xcexport(
  archive_path: &quot;...&quot;,
  export_options_plist: {
    method: &quot;ad-hoc&quot;,
    thinning: &quot;&lt;thin-for-all-variants&gt;&quot;,
    manifest: {
      appURL: &quot;https://example.com/path/MyApp Name.ipa&quot;,
      displayImageURL: &quot;https://example.com/display image.png&quot;,
      fullSizeImageURL: &quot;https://example.com/fullSize image.png&quot;,
    }
  }
)
</code></pre>

<p>When using <code>:export_options_plist</code> as hash, the <code>:teamID</code> is read from <code>Appfile</code>. <code>:appURL</code>, <code>:displayImageURL</code>, <code>:fullSizeImageURL</code>, <code>:assetPackManifestURL</code> and <code>:onDemandResourcesAssetPacksBaseURL</code> are URI escaped to prevent Xcode errors.</p>
<p>Environment variables may be added to a .env file in place of some parameters:</p>
<pre><code>XCODE_PROJECT=&quot;./MyApp.xcodeproj&quot;
XCODE_WORKSPACE=&quot;./MyApp.xcworkspace&quot;
XCODE_SCHEME=&quot;MyApp&quot;
XCODE_BUILD_PATH=&quot;./build&quot;
</code></pre>

<p>More usage examples (assumes the above .env setup is being used):</p>
<pre><code class="ruby">  # Clean the project
  xcclean

  # Build the project
  xcbuild

  # Run tests in given simulator
  xctest(
    destination: &quot;name=iPhone 5s,OS=8.1&quot;
  )

  # Create an archive (./build-dir/MyApp.xcarchive)
  xcarchive

  # Export a signed binary (./build-dir/MyApp.ipa)
  xcexport
</code></pre>

<p>See how <a href="https://github.com/fastlane/examples/blob/master/Wikipedia/Fastfile">Wikipedia</a> uses the <code>xctest</code> action to test their app.</p>
<p><strong>Note</strong>: <code>xcodebuild</code> is a complex command, so it is recommended to use <a href="https://github.com/fastlane/fastlane/tree/master/gym">gym</a> for building your ipa file and <a href="https://github.com/fastlane/fastlane/tree/master/scan">scan</a> for testing your app instead.</p>
<h3 id="copy_artifacts">copy_artifacts</h3>
<p>This action copies artifacs to a target directory. It's useful if you have a CI that will pick up these artifacts and attach them to the build. Useful e.g. for storing your <code>.ipa</code>s, <code>.dSYM.zip</code>s, <code>.mobileprovision</code>s, <code>.cert</code>s</p>
<p>Make sure your target_path is gitignored, and if you use <code>reset_git_repo</code>, make sure the artifacts are added to the exclude list</p>
<p>Example in conjunction with reset_git_repo</p>
<pre><code class="ruby"># Move our artifacts to a safe location so TeamCity can pick them up
copy_artifacts(
  target_path: 'artifacts',
  artifacts: ['*.cer', '*.mobileprovision', '*.ipa', '*.dSYM.zip']
)

# Reset the git repo to a clean state, but leave our artifacts in place
reset_git_repo(
  exclude: 'artifacts'
)
</code></pre>

<h3 id="clean_build_artifacts">clean_build_artifacts</h3>
<p>This action deletes the files that get created in your repo as a result of running the <code>ipa</code> and <code>sigh</code> commands. It doesn't delete the <code>fastlane/report.xml</code> though, this is probably more suited for the .gitignore.</p>
<p>Useful if you quickly want to send out a test build by dropping down to the command line and typing something like <code>fastlane beta</code>, without leaving your repo in a messy state afterwards.</p>
<pre><code class="ruby">clean_build_artifacts
</code></pre>

<p>See how <a href="https://github.com/fastlane/examples/blob/master/Artsy/eidolon/Fastfile">Artsy</a> cleans their build artifacts after building and distributing their app.</p>
<h3 id="frameit"><a href="https://github.com/fastlane/fastlane/tree/master/frameit">frameit</a></h3>
<p>By default, the device color will be black</p>
<pre><code class="ruby">frameit
</code></pre>

<p>To use white (sorry, silver) device frames</p>
<pre><code class="ruby">frameit :silver
</code></pre>

<p>See how <a href="https://github.com/fastlane/examples/blob/master/MindNode/Fastfile">MindNode</a> uses <code>frameit</code> to not only frame the screenshots, but also add a title and a background around the screenshots. More information available in their <a href="https://github.com/fastlane/examples/blob/master/MindNode/Fastfile">Fastfile</a> and the <a href="https://github.com/fastlane/examples/tree/master/MindNode/screenshots">screenshots folder</a> (<a href="https://github.com/fastlane/examples/blob/master/MindNode/screenshots/Framefile.json">Framefile.json</a>)</p>
<h3 id="dsym_zip">dsym_zip</h3>
<p>Create a zipped dSYM file from your <code>.xcarchive</code>, useful if you use the <code>xcodebuild</code> action in combination with <code>crashlytics</code> or <code>hockey</code>.</p>
<pre><code class="ruby">dsym_zip
</code></pre>

<p>You can manually specify the path to the xcarchive (not needed if you use <code>xcodebuild</code>/<code>xcarchive</code> to build your archive):</p>
<pre><code class="ruby">dsym_zip(
  archive_path: 'MyApp.xcarchive'
)
</code></pre>

<h3 id="splunkmint">splunkmint</h3>
<p>Uploads dSYM.zip file to <a href="https://mint.splunk.com">Splunk MINT</a> for crash symbolication.</p>
<pre><code class="ruby">splunkmint(
    dsym: &quot;My.app.dSYM.zip&quot;,
    api_key: &quot;43564d3a&quot;,
    api_token: &quot;e05456234c4869fb7e0b61&quot;
)
</code></pre>

<p>If you use <code>gym</code> the <code>dsym</code> parameter is optional.</p>
<h3 id="recreate_schemes">recreate_schemes</h3>
<p>Recreate shared Xcode project schemes if the <code>Shared</code> checkbox was not enabled.</p>
<pre><code class="ruby">recreate_schemes(
  project: './path/to/MyApp.xcodeproj'
)
</code></pre>

<h2 id="testing">Testing</h2>
<h3 id="scan"><a href="https://github.com/fastlane/fastlane/tree/master/scan">scan</a></h3>
<p><code>scan</code> makes it super easy to run tests of your iOS and Mac applications</p>
<pre><code class="ruby">scan
</code></pre>

<p>You can define all options that are available in <code>scan --help</code></p>
<pre><code class="ruby">scan(
  workspace: &quot;App.xcworkspace&quot;,
  scheme: &quot;MyTests&quot;,
  clean: false
)
</code></pre>

<h3 id="xctest">xctest</h3>
<p>Use the <code>xctest</code> command to run unit tests.</p>
<p>When running tests, coverage reports can be generated via <a href="https://github.com/supermarin/xcpretty">xcpretty</a> reporters:</p>
<pre><code class="ruby">  # Run tests in given simulator
  xctest(
    destination: &quot;name=iPhone 5s,OS=8.1&quot;,
    destination_timeout: 120, # increase device/simulator timeout, usually used on slow CI boxes
    reports: [{
      report: 'html',
      output: './build-dir/test-report.html',  # will use XCODE_BUILD_PATH/report, if output is not provided
      screenshots: 1
    },
    {
      report: 'junit',
      output: './build-dir/test-report.xml'
    }]
  )
</code></pre>

<h3 id="xctool"><a href="https://github.com/facebook/xctool">xctool</a></h3>
<p>You can run any <code>xctool</code> action. This will require having <a href="https://github.com/facebook/xctool">xctool</a> installed through <a href="http://brew.sh/">homebrew</a>.</p>
<pre><code class="ruby">xctool :test
</code></pre>

<p>It is recommended to have the <code>xctool</code> configuration stored in a <a href="https://github.com/facebook/xctool#configuration-xctool-args"><code>.xctool-args</code></a> file.</p>
<p>If you prefer to have the build configuration stored in the <code>Fastfile</code>:</p>
<pre><code class="ruby">xctool :test, [
      &quot;--workspace&quot;, &quot;'AwesomeApp.xcworkspace'&quot;,
      &quot;--scheme&quot;, &quot;'Schema Name'&quot;,
      &quot;--configuration&quot;, &quot;Debug&quot;,
      &quot;--sdk&quot;, &quot;iphonesimulator&quot;,
      &quot;--arch&quot;, &quot;i386&quot;
    ].join(&quot; &quot;)
</code></pre>

<h3 id="slather"><a href="https://github.com/venmo/slather">slather</a></h3>
<blockquote>
<p>Generate test coverage reports for Xcode projects &amp; hook it into CI.</p>
</blockquote>
<pre><code class="ruby">slather(
  build_directory: 'foo',
  input_format: 'bah',
  scheme: 'Foo',
  proj: 'foo.xcodeproj'
)
</code></pre>

<h3 id="gcovr"><a href="http://gcovr.com/">gcovr</a></h3>
<p>Generate summarized code coverage reports.</p>
<pre><code class="ruby">gcovr(
  html: true,
  html_details: true,
  output: &quot;./code-coverage/report.html&quot;
)
</code></pre>

<h3 id="lcov"><a href="http://ltp.sourceforge.net/coverage/lcov.php">lcov</a></h3>
<p>Generate code coverage reports based on lcov.</p>
<pre><code class="ruby">lcov(
  project_name: &quot;yourProjectName&quot;,
  scheme: &quot;yourScheme&quot;,
  output_dir: &quot;cov_reports&quot; # This value is optional. Default is coverage_reports
)
</code></pre>

<h3 id="xcov"><a href="https://github.com/nakiostudio/xcov">xcov</a></h3>
<p>Create nice code coverage reports and post coverage summaries on Slack <em>(xcov gem is required)</em>.</p>
<pre><code class="ruby">xcov(
  workspace: &quot;YourWorkspace.xcworkspace&quot;,
  scheme: &quot;YourScheme&quot;,
  output_directory: &quot;xcov_output&quot;
)
</code></pre>

<h3 id="oclint"><a href="http://oclint.org">OCLint</a></h3>
<p>Run the static analyzer tool <a href="http://oclint.org">OCLint</a> for your project. You need to have a <code>compile_commands.json</code> file in your <code>fastlane</code> directory or pass a path to your file.</p>
<pre><code class="ruby">oclint(
  compile_commands: 'commands.json',    # The JSON compilation database, use xctool reporter 'json-compilation-database'
  select_regex: /ViewController.m/,     # Select all files matching this regex
  exclude_regex: /Test.m/,              # Exclude all files matching this regex
  report_type: 'pmd',                   # The type of the report (default: html)
  max_priority_1: 10,                   # The max allowed number of priority 1 violations
  max_priority_2: 100,                  # The max allowed number of priority 2 violations
  max_priority_3: 1000,                 # The max allowed number of priority 3 violations
  thresholds: [                         # Override the default behavior of rules
    'LONG_LINE=200',
    'LONG_METHOD=200'
  ],
  enable_rules: [                       # List of rules to pick explicitly
    'DoubleNegative',
    &quot;SwitchStatementsDon'TNeedDefaultWhenFullyCovered&quot;
  ],
  disable_rules: [&quot;GotoStatement&quot;],     # List of rules to disable
  list_enabled_rules: true,             # List enabled rules
  enable_clang_static_analyzer: true,   # Enable Clang Static Analyzer, and integrate results into OCLint report
  enable_global_analysis: true,         # Compile every source, and analyze across global contexts (depends on number of source files, could results in high memory load)
  allow_duplicated_violations: true     # Allow duplicated violations in the OCLint report
)
</code></pre>

<h3 id="swiftlint"><a href="https://github.com/realm/SwiftLint">SwiftLint</a></h3>
<p>Run SwiftLint for your project.</p>
<pre><code>swiftlint(
  mode: :lint,                          # SwiftLint mode: :lint (default) or :autocorrect
  output_file: 'swiftlint.result.json', # The path of the output file (optional)
  config_file: '.swiftlint-ci.yml',     # The path of the configuration file (optional)
  files: [                              # List of files to process (optional)
    'AppDelegate.swift',
    'path/to/project/Model.swift'
  ],
  ignore_exit_status: true              # Allow fastlane to continue even if SwiftLint returns a non-zero exit status
)
</code></pre>

<h3 id="ensure_no_debug_code"><code>ensure_no_debug_code</code></h3>
<p>You don't want any debug code to slip into production. You can use the <code>ensure_no_debug_code</code> action to make sure no debug code is in your code base before deploying it:</p>
<pre><code class="ruby">ensure_no_debug_code(text: &quot;// TODO&quot;)
</code></pre>

<pre><code class="ruby">ensure_no_debug_code(text: &quot;NSLog&quot;,
                     path: &quot;./lib&quot;,
                extension: &quot;m&quot;)
</code></pre>

<pre><code class="ruby">ensure_no_debug_code(text: &quot;(^#define DEBUG|NSLog)&quot;,
                     path: &quot;./lib&quot;,
                extension: &quot;m&quot;)
</code></pre>

<pre><code class="ruby">ensure_no_debug_code(text: &quot;&lt;&lt;&lt;&lt;&lt;&lt;&quot;,
                     path: &quot;./lib&quot;,
               extensions: [&quot;m&quot;, &quot;swift&quot;])
</code></pre>

<h3 id="appium"><a href="http://appium.io/">Appium</a></h3>
<p>Run UI testing by <code>Appium::Driver</code> with RSpec.</p>
<pre><code class="ruby">appium(
  app_path:  &quot;appium/apps/TargetApp.app&quot;,
  spec_path: &quot;appium/spec&quot;,
  platform:  &quot;iOS&quot;,
  caps: {
    versionNumber: &quot;9.1&quot;,
    deviceName:    &quot;iPhone 6&quot;
  }
)
</code></pre>

<h2 id="deploying">Deploying</h2>
<h3 id="pilot"><a href="https://github.com/fastlane/fastlane/tree/master/pilot">pilot</a></h3>
<pre><code class="ruby">pilot
</code></pre>

<h4 id="options">Options</h4>
<p>If your account is on multiple teams and you need to tell the <code>iTMSTransporter</code> which "provider" to use, you can set the <code>itc_provider</code> option to pass this info.</p>
<pre><code class="ruby">pilot(
  username: &quot;felix@krausefx.com&quot;,
  app_identifier: &quot;com.krausefx.app&quot;,
  itc_provider: 'abcde12345' # pass a specific value to the iTMSTransporter -itc_provider option
)
</code></pre>

<p>More information about the available options <code>fastlane action pilot</code> and a more detailed description on the <a href="https://github.com/fastlane/fastlane/tree/master/pilot">pilot project page</a>.</p>
<h3 id="deliver"><a href="https://github.com/fastlane/fastlane/tree/master/deliver">deliver</a></h3>
<pre><code class="ruby">deliver
</code></pre>

<p>To upload a new build to TestFlight use <code>pilot</code> instead.</p>
<h4 id="options_1">Options</h4>
<p>If you don't want a PDF report for App Store builds, append <code>:force</code> to the command. This is useful when running <code>fastlane</code> on your Continuous Integration server: <code>deliver(force: true)</code></p>
<p>If your account is on multiple teams and you need to tell the <code>iTMSTransporter</code> which "provider" to use, you can set the <code>itc_provider</code> option to pass this info.</p>
<p>Other options</p>
<pre><code class="ruby">deliver(
  force: true, # Set to true to skip PDF verification
  email: &quot;itunes@connect.com&quot; # different Apple ID than the dev portal
  itc_provider: 'abcde12345' # pass a specific value to the iTMSTransporter -itc_provider option
)
</code></pre>

<p>See how <a href="https://github.com/fastlane/examples/blob/master/ProductHunt/Fastfile">Product Hunt</a> automated the building and distributing of a beta version over TestFlight in their <a href="https://github.com/fastlane/examples/blob/master/ProductHunt/Fastfile">Fastfile</a>.</p>
<p><strong>Note:</strong> There is an action named <code>appstore</code> which is a convenience alias to <code>deliver</code>.</p>
<h3 id="testflight">TestFlight</h3>
<p>To upload a new binary to Apple TestFlight use the <code>testflight</code> action:</p>
<pre><code class="ruby">testflight
</code></pre>

<p>This will use <a href="https://github.com/fastlane/fastlane/tree/master/deliver">deliver</a> under the hood.</p>
<p>Additionally you can skip the submission of the new binary to the testers to only upload the build:</p>
<pre><code class="ruby">testflight(skip_deploy: true)
</code></pre>

<h3 id="latest_testflight_build_number"><code>latest_testflight_build_number</code></h3>
<p>Fetches most recent build number from TestFlight based on the version number. Provides a way to have <code>increment_build_number</code> be based on the latest build you uploaded to iTC.</p>
<pre><code class="ruby">latest_testflight_build_number(version: &quot;1.3&quot;)
</code></pre>

<p>can be used in combination with <code>increment_build_number</code></p>
<pre><code class="ruby">increment_build_number({
  build_number: latest_testflight_build_number + 1
})
</code></pre>

<h3 id="local-device">Local Device</h3>
<h3 id="install_on_device"><code>install_on_device</code></h3>
<p>Installs the ipa on the device, if no id is given, the first found iOS device will be used, works via USB or Wi-Fi.
this requires <code>ios-deploy</code> to be installed please have a look at <a href="https://github.com/phonegap/ios-deploy">ios-deploy</a>. to quickly install it, use <code>npm -g i ios-deploy</code></p>
<pre><code class="ruby">install_on_device(
  device_id: &quot;a3be6c9ff7e5c3c6028597513243b0f933b876d4&quot;
  ipa: &quot;./app.ipa&quot;
)
</code></pre>

<h3 id="hockeyapp"><a href="http://hockeyapp.net">HockeyApp</a></h3>
<pre><code class="ruby">hockey(
  api_token: '...',
  ipa: './app.ipa',
  notes: &quot;Changelog&quot;
)
</code></pre>

<p>Symbols will also be uploaded automatically if a <code>app.dSYM.zip</code> file is found next to <code>app.ipa</code>. In case it is located in a different place you can specify the path explicitly in <code>:dsym</code> parameter.</p>
<p>More information about the available options can be found in the <a href="http://support.hockeyapp.net/kb/api/api-versions#upload-version">HockeyApp Docs</a>.</p>
<p>See how <a href="https://github.com/fastlane/examples/blob/master/Artsy/eidolon/Fastfile">Artsy</a> distributes new builds via Hockey in their <a href="https://github.com/fastlane/examples/blob/master/Artsy/eidolon/Fastfile">Fastfile</a>.</p>
<h3 id="crashlytics-beta"><a href="http://try.crashlytics.com/beta/">Crashlytics Beta</a></h3>
<pre><code class="ruby">crashlytics(
  crashlytics_path: './Pods/Crashlytics/', # path to your Crashlytics submit binary.
  api_token: '...',
  build_secret: '...',
  ipa_path: './app.ipa'
)
</code></pre>

<p>Additionally you can specify <code>notes</code>, <code>emails</code>, <code>groups</code> and <code>notifications</code>.</p>
<h4 id="distributing-to-groups">Distributing to Groups</h4>
<p>When using the <code>groups</code> parameter, it's important to use the group <strong>alias</strong> names for each group you'd like to distribute to. A group's alias can be found in the web UI. If you're viewing the Beta page, you can open the groups dialog here:</p>
<p><img alt="Crashlytics Beta Groups Navigation" src="../../assets/Beta-Groups-Nav.png" /></p>
<p>Each group's alias is then listed here:</p>
<p><img alt="Crashlytics Beta Groups Navigation" src="../../assets/Beta-Group-Alias.png" /></p>
<p>There are a couple reasons why aliases exist:</p>
<ol>
<li>They are restricted to a safer set of characters to try to make command line invocations a bit easier</li>
<li>They are created once when the group is created, but are not affected by later edits to the group. This allows your scripts to be stable, even if you decide to change the group's name.</li>
</ol>
<p>So, for the example group above, you should specify</p>
<p><code>groups: ["dev-team-1"]</code> :white_check_mark:</p>
<p><em>not</em></p>
<p><code>groups: ["Android Devs"]</code> :x:</p>
<h4 id="environment-variables">Environment Variables</h4>
<p>The following environment variables may be used in place of parameters: <code>CRASHLYTICS_API_TOKEN</code>, <code>CRASHLYTICS_BUILD_SECRET</code>, and <code>CRASHLYTICS_FRAMEWORK_PATH</code>.</p>
<h3 id="apteligent">Apteligent</h3>
<p>Uploads dSYM.zip file to <a href="https://apteligent.com">Apteligent</a> for crash symbolication.</p>
<pre><code class="ruby">apteligent(
  app_id: '...',
  api_key: '...'
)
</code></pre>

<p>If you use <code>gym</code> the <code>dsym</code> parameter is optional.</p>
<h3 id="download_dsyms"><code>download_dsyms</code></h3>
<p>This action downloads dSYM files from Apple iTunes Connect after the ipa got re-compiled by Apple. Useful if you have Bitcode enabled.</p>
<pre><code class="ruby">lane :refresh_dsyms do
  download_dsyms                  # Download dSYM files from iTC
  upload_symbols_to_crashlytics   # Upload them to Crashlytics
  clean_build_artifacts           # Delete the local dSYM files
end
</code></pre>

<h3 id="upload_symbols_to_crashlytics"><code>upload_symbols_to_crashlytics</code></h3>
<p>This action allows you to upload symbolication files to Crashlytics. It's extra useful if you use it to download the latest dSYM files from Apple when you use Bitcode.</p>
<pre><code class="ruby">upload_symbols_to_crashlytics(dsym_path: &quot;./App.dSYM.zip&quot;)
</code></pre>

<h3 id="upload_symbols_to_sentry"><a href="https://getsentry.com">upload_symbols_to_sentry</a></h3>
<p>This action allows you to upload symbolication files to Sentry.</p>
<pre><code class="ruby">upload_symbols_to_sentry(
  auth_token: '...',
  org_slug: '...',
  project_slug: '...',
  dsym_path: './App.dSYM.zip'
)
</code></pre>

<p>The following environment variables may be used in place of parameters: <code>SENTRY_AUTH_TOKEN</code>, <code>SENTRY_ORG_SLUG</code>, <code>SENTRY_PROJECT_SLUG</code>, and <code>SENTRY_DSYM_PATH</code>.</p>
<h3 id="aws-s3-distribution">AWS S3 Distribution</h3>
<p>Upload a new build to Amazon S3 to distribute the build to beta testers. Works for both Ad Hoc and Enterprise signed applications. This step will generate the necessary HTML, plist, and version files for you.</p>
<p>Add the <code>s3</code> action after the <code>ipa</code> step:</p>
<pre><code class="ruby">s3
</code></pre>

<p>You can also customize a lot of options:</p>
<pre><code class="ruby">s3(
  # All of these are used to make Shenzhen's `ipa distribute:s3` command
  access_key: ENV['S3_ACCESS_KEY'],               # Required from user.
  secret_access_key: ENV['S3_SECRET_ACCESS_KEY'], # Required from user.
  bucket: ENV['S3_BUCKET'],                       # Required from user.
  ipa: 'AppName.ipa',                             # Optional is you use `ipa` to build
  dsym: 'AppName.app.dSYM.zip',                   # Optional is you use `ipa` to build
  path: 'v{CFBundleShortVersionString}_b{CFBundleVersion}/', # This is actually the default.
  upload_metadata: true,                          # Upload version.json, plist and HTML. Set to false to skip uploading of these files.
  version_file_name: 'app_version.json',          # Name of the file to upload to S3. Defaults to 'version.json'
  version_template_path: 'path/to/erb'            # Path to an ERB to configure the structure of the version JSON file
)
</code></pre>

<p>It is recommended to <strong>not</strong> store the AWS access keys in the <code>Fastfile</code>.</p>
<p>The uploaded <code>version.json</code> file provides an easy way for apps to poll if a new update is available. The JSON looks like:</p>
<pre><code class="json">{
    &quot;latestVersion&quot;: &quot;&lt;%= full_version %&gt;&quot;,
    &quot;updateUrl&quot;: &quot;itms-services://?action=download-manifest&amp;url=&lt;%= url %&gt;&quot;
}
</code></pre>

<h3 id="deploygate"><a href="https://deploygate.com/">DeployGate</a></h3>
<p>You can retrieve your username and API token on <a href="https://deploygate.com/settings">your settings page</a>.</p>
<pre><code class="ruby">deploygate(
  api_token: '...',
  user: 'target username or organization name',
  ipa: './ipa_file.ipa',
  message: &quot;Build #{lane_context[SharedValues::BUILD_NUMBER]}&quot;,
  distribution_key: '(Optional) Target Distribution Key'
)
</code></pre>

<p>If you put <code>deploygate</code> after <code>ipa</code> action, you don't have to specify IPA file path, as it is extracted from the lane context automatically.</p>
<p>More information about the available options can be found in the <a href="https://deploygate.com/docs/api">DeployGate Push API document</a>.</p>
<h3 id="xcode-server"><a href="https://www.apple.com/uk/support/osxserver/xcodeserver/">Xcode Server</a></h3>
<p>This action retrieves integration assets (<code>.xcarchive</code>, logs etc) from your Xcode Server instance over HTTPS.</p>
<pre><code class="ruby">xcode_server_get_assets(
    host: '10.99.0.59', # Specify Xcode Server's Host or IP Address
    bot_name: 'release-1.3.4' # Specify the particular Bot
  )
</code></pre>

<p>This allows you to use Xcode Server for building and testing, which can be useful when your build takes a long time and requires connected iOS devices for testing. This action only requires you specify the <code>host</code> and the <code>bot_name</code> and it will go and download, unzip and return a path to the downloaded folder. Then you can export an IPA from the archive and upload it with <code>deliver</code>.</p>
<p>Run <code>fastlane action xcode_server_get_assets</code> for the full list of options.</p>
<h3 id="set_changelog">set_changelog</h3>
<p>To easily set the changelog of an app on iTunes Connect for all languages</p>
<pre><code class="ruby">set_changelog(app_identifier: &quot;com.krausefx.app&quot;, version: &quot;1.0&quot;, changelog: &quot;All Languages&quot;)
</code></pre>

<p>You can store the changelog in <code>./fastlane/changelog.txt</code> and it will automatically get loaded from there. This integration is useful if you support e.g. 10 languages and want to use the same "What's new"-text for all languages.</p>
<h3 id="make_changelog_from_jenkins">make_changelog_from_jenkins</h3>
<p>Generate a changelog using the Changes section the running Jenkins job.</p>
<pre><code class="ruby">make_changelog_from_jenkins(
  # Optional, lets you set a changelog in the case is not generated on Jenkins or if ran outside of Jenkins
  fallback_changelog: &quot;Bug fixes and performance enhancements&quot;
)
</code></pre>

<h3 id="github-releases"><a href="https://github.com">GitHub Releases</a></h3>
<p>This action creates a new release for your repository on GitHub and can also upload specified assets like <code>.ipa</code>s and <code>.app</code>s, binary files, changelogs etc.</p>
<pre><code class="ruby">github_release = set_github_release(
  repository_name: &quot;fastlane/fastlane&quot;,
  api_token: ENV['GITHUB_TOKEN'],
  name: &quot;Super New actions&quot;,
  tag_name: &quot;v1.22.0&quot;,
  description: File.read(&quot;changelog&quot;),
  commitish: &quot;master&quot;,
  upload_assets: [&quot;example_integration.ipa&quot;, &quot;./pkg/built.gem&quot;]
)
</code></pre>

<h3 id="artifactory"><a href="http://www.jfrog.com/artifactory/">artifactory</a></h3>
<p>This allows you to upload your ipa, or any other file you want, to artifactory.</p>
<pre><code class="ruby">artifactory(
  username: &quot;username&quot;,
  password: &quot;password&quot;,
  endpoint: &quot;https://artifactory.example.com/artifactory/&quot;,
  file: 'example.ipa',                                # File to upload
  repo: 'mobile_artifacts',                           # Artifactory repo
  repo_path: '/ios/appname/example-major.minor.ipa'   # Path to place the artifact including its filename
)
</code></pre>

<p>To get a list of all available parameters run <code>fastlane action artifactory</code></p>
<h3 id="nexus_upload"><a href="http://www.sonatype.com/nexus/">nexus_upload</a></h3>
<p>Upload your ipa, or any other file you want, to Sonatype Nexus platform.</p>
<pre><code class="ruby">nexus_upload(
  file: &quot;/path/to/file.ipa&quot;,
  repo_id: &quot;artefacts&quot;,
  repo_group_id: &quot;com.fastlane&quot;,
  repo_project_name: &quot;ipa&quot;,
  repo_project_version: &quot;1.13&quot;,
  repo_classifier: &quot;dSYM&quot;, # Optional
  endpoint: &quot;http://localhost:8081&quot;,
  username: &quot;admin&quot;,
  password: &quot;admin123&quot;
)
</code></pre>

<h3 id="appetizeio"><a href="https://appetize.io/">Appetize.io</a></h3>
<p>Upload your zipped app to Appetize.io to stream your app in the browser.</p>
<pre><code class="ruby">appetize(
  path: './MyApp.zip',
  api_token: 'yourapitoken', # get it from https://appetize.io/docs#request-api-token
  public_key: 'your_public_key' # get it from https://appetize.io/dashboard
)
</code></pre>

<p>If you provide a <code>public_key</code>, this will overwrite an existing application. If you want to have this build as a new app version, you shouldn't provide this value.</p>
<h4 id="device_grid-for-your-pull-requests"><code>device_grid</code> for your Pull Requests</h4>
<p><img alt="../lib/fastlane/actions/device_grid/assets/GridExampleScreenshot.png" src="../../lib/fastlane/actions/device_grid/assets/GridExampleScreenshot.png" /></p>
<p>Follow <a href="https://github.com/fastlane/fastlane/blob/master/fastlane/lib/fastlane/actions/device_grid/README.md">this guide</a> to get a grid of devices every time you submit a pull request. The app will be uploaded to <a href="https://appetize.io/">appetize.io</a> so you can stream and try them right in your browser.</p>
<p><a href="https://github.com/fastlane/fastlane/blob/master/fastlane/lib/fastlane/actions/device_grid/README.md">Open the Guide</a></p>
<p>From within your app, you can check it is currently running on <a href="https://appetize.io/">Appetize.io</a> using</p>
<pre><code class="objective-c">[[NSUserDefaults standardUserDefaults] objectForKey:@&quot;isAppetize&quot;]
</code></pre>

<h3 id="appaloosa"><a href="https://www.appaloosa-store.com">Appaloosa</a></h3>
<p>Upload your ipa or apk to your private store on Appaloosa.</p>
<p>Add the <code>appaloosa</code> action after the <code>gym</code> step or use it with your existing <code>apk</code>.</p>
<p>You can add some options:</p>
<pre><code class="ruby">appaloosa(
  # Path tor your IPA or APK
  binary: '/path/to/binary.ipa',
  # You can find your store’s id at the bottom of the “Settings” page of your store
  store_id: 'your_store_id',
  # You can find your api_token at the bottom of the “Settings” page of your store
  api_token: 'your_api_key',
  # User group_ids visibility, if it's not specified we'll publish the app for all users in your store'
  group_ids: '112, 232, 387',
  # You can use fastlane/snapshot or specify your own screenshots folder.
  # If you use snapshot please specify a local and a device to upload your screenshots from.
  # When multiple values are specified in the Snapfile, we default to 'en-US'
  locale: 'en-US',
  # By default, the screenshots from the last device will be used
  device: 'iPhone6',
  # Screenshots' filenames should start with device's name like &quot;iphone6-s1.png&quot; if device specified
  screenshots: '/path/to_your/screenshots'
  )
</code></pre>

<h3 id="tryoutsio"><a href="https://tryouts.io/">Tryouts.io</a></h3>
<p>Upload your Android or iOS build to <a href="https://tryouts.io/">Tryouts.io</a></p>
<pre><code class="ruby">tryouts(
  api_token: &quot;...&quot;,
  app_id: &quot;application-id&quot;,
  build_file: &quot;test.ipa&quot;,
)
</code></pre>

<p>For more information about the available options, run <code>fastlane action tryouts</code> or check out the <a href="http://tryouts.readthedocs.org/en/latest/releases.html#create-release">Tryouts Documentation</a>.</p>
<h3 id="installr"><a href="https://www.installrapp.com">Installr</a></h3>
<p>Upload your iOS build to <a href="https://www.installrapp.com">Installr</a></p>
<pre><code class="ruby">installr(
  api_token: &quot;...&quot;,
  ipa: &quot;test.ipa&quot;,
  notes: &quot;The next great version of the app!&quot;,
  notify: &quot;dev,qa&quot;,
  add: &quot;exec,ops&quot;
)
</code></pre>

<p>For more information about the available options, run <code>fastlane action installr</code> or check out the <a href="http://help.installrapp.com/api/">Installr Documentation</a>.</p>
<h3 id="testfairy"><a href="https://testfairy.com/">TestFairy</a></h3>
<p>Upload your iOS build to <a href="https://testfairy.com/">TestFairy</a></p>
<p>You can retrieve your API key on <a href="https://free.testfairy.com/settings/">your settings page</a>.</p>
<pre><code class="ruby">testfairy(
  api_key: '...',
  ipa: './ipa_file.ipa',
  comment: &quot;Build #{lane_context[SharedValues::BUILD_NUMBER]}&quot;,
)
</code></pre>

<h2 id="modifying-project">Modifying Project</h2>
<h3 id="increment_build_number"><a href="https://developer.apple.com/library/ios/qa/qa1827/_index.html">increment_build_number</a></h3>
<p>This method will increment the <strong>build number</strong>, not the app version. Usually this is just an auto incremented number. You first have to <a href="https://developer.apple.com/library/ios/qa/qa1827/_index.html">set up your Xcode project</a>, if you haven't done it already.</p>
<pre><code class="ruby">increment_build_number # automatically increment by one
increment_build_number(
  build_number: '75' # set a specific number
)

increment_build_number(
  build_number: 75, # specify specific build number (optional, omitting it increments by one)
  xcodeproj: './path/to/MyApp.xcodeproj' # (optional, you must specify the path to your main Xcode project if it is not in the project root directory)
)
</code></pre>

<p>See how <a href="https://github.com/fastlane/examples/blob/master/Wikipedia/Fastfile">Wikpedia</a> uses the <code>increment_build_number</code> action.</p>
<p>You can also only receive the build number without modifying it</p>
<pre><code class="ruby">build_number = get_build_number(xcodeproj: &quot;Project.xcodeproj&quot;)
</code></pre>

<h3 id="increment_version_number"><a href="https://developer.apple.com/library/ios/qa/qa1827/_index.html">increment_version_number</a></h3>
<p>This action will increment the <strong>version number</strong>. You first have to <a href="https://developer.apple.com/library/ios/qa/qa1827/_index.html">set up your Xcode project</a>, if you haven't done it already.</p>
<pre><code class="ruby">increment_version_number # Automatically increment patch version number.
increment_version_number(
  bump_type: &quot;patch&quot; # Automatically increment patch version number
)
increment_version_number(
  bump_type: &quot;minor&quot; # Automatically increment minor version number
)
increment_version_number(
  bump_type: &quot;major&quot; # Automatically increment major version number
)
increment_version_number(
  version_number: '2.1.1' # Set a specific version number
)

increment_version_number(
  version_number: '2.1.1',                # specify specific version number (optional, omitting it increments patch version number)
  xcodeproj: './path/to/MyApp.xcodeproj'  # (optional, you must specify the path to your main Xcode project if it is not in the project root directory)
)
</code></pre>

<p>See how <a href="https://github.com/fastlane/examples/blob/master/Wikipedia/Fastfile">Wikpedia</a> uses the <code>increment_version_number</code> action.</p>
<p>You can also only receive the version number without modifying it</p>
<pre><code class="ruby">version = get_version_number(xcodeproj: &quot;Project.xcodeproj&quot;)
</code></pre>

<h3 id="get_build_number_repository">get_build_number_repository</h3>
<pre><code class="ruby">get_build_number_repository
</code></pre>

<p>This action will get the <strong>build number</strong> according to what the SCM HEAD reports.
Currently supported SCMs are svn (uses root revision), git-svn (uses svn revision) and git (uses short hash) and mercurial (uses short hash or revision number).</p>
<p>There is an option, <code>:use_hg_revision_number</code>, which allows to use mercurial revision number instead of hash.</p>
<h3 id="set_build_number_repository">set_build_number_repository</h3>
<pre><code class="ruby">set_build_number_repository
</code></pre>

<p>This action will set the <strong>build number</strong> according to what the SCM HEAD reports.
Currently supported SCMs are svn (uses root revision), git-svn (uses svn revision) and git (uses short hash) and mercurial (uses short hash or revision number).</p>
<p>There is an option, <code>:use_hg_revision_number</code>, which allows to use mercurial revision number instead of hash.</p>
<h3 id="update_project_team">update_project_team</h3>
<p>This action allows you to modify the developer team. This may be useful if you want to use a different team for alpha, beta or distribution.</p>
<pre><code class="ruby">update_project_team(
  path: &quot;Example.xcodeproj&quot;,
  teamid: &quot;A3ZZVJ7CNY&quot;
)
</code></pre>

<h2 id="update_info_plist">update_info_plist</h2>
<p>This action allows you to modify your <code>Info.plist</code> file before building. This may be useful if you want a separate build for alpha, beta or nightly builds, but don't want a separate target.</p>
<pre><code class="ruby"># update app identifier string
update_info_plist(
  plist_path: &quot;path/to/Info.plist&quot;,
  app_identifier: &quot;com.example.newappidentifier&quot;
)

# Change the Display Name of your app
update_info_plist(
  plist_path: &quot;path/to/Info.plist&quot;,
  display_name: &quot;MyApp-Beta&quot;
)

# Target a specific `xcodeproj` rather than finding the first available one
update_info_plist(
  xcodeproj: &quot;path/to/Example.proj&quot;,
  plist_path: &quot;path/to/Info.plist&quot;,
  display_name: &quot;MyApp-Beta&quot;
)

# Advanced processing: find URL scheme for particular key and replace value
update_info_plist(
  xcodeproj: &quot;path/to/Example.proj&quot;,
  plist_path: &quot;path/to/Info.plist&quot;,
  block: lambda { |plist|
    urlScheme = plist['CFBundleURLTypes'].find{|scheme| scheme['CFBundleURLName'] == 'com.acme.default-url-handler'}
    urlScheme[:CFBundleURLSchemes] = ['acme-production']
  }
)
</code></pre>

<h2 id="update_url_schemes">update_url_schemes</h2>
<p>This action allows you to update the URL schemes of the app before building it.
For example, you can use this to set a different url scheme for the alpha
or beta version of the app.</p>
<pre><code class="ruby">update_url_schemes(path: &quot;path/to/Info.plist&quot;,
            url_schemes: [&quot;com.myapp&quot;])
</code></pre>

<h3 id="update_app_identifier">update_app_identifier</h3>
<p>Update an app identifier by either setting <code>CFBundleIdentifier</code> or <code>PRODUCT_BUNDLE_IDENTIFIER</code>, depending on which is already in use.</p>
<pre><code class="ruby">update_app_identifier(
  xcodeproj: 'Example.xcodeproj', # Optional path to xcodeproj, will use the first .xcodeproj if not set
  plist_path: 'Example/Info.plist', # Path to info plist file, relative to xcodeproj
  app_identifier: 'com.test.example' # The App Identifier
)
</code></pre>

<h3 id="badge"><a href="https://github.com/HazAT/badge">badge</a></h3>
<p>Modify your app icon and add a badge to it. For more info how to use it see repo.</p>
<pre><code class="ruby">badge(dark: true) # or
badge(alpha: true) # or
badge(custom: &quot;/Users/xxx/Desktop/badge.png&quot;) # or
badge(shield: &quot;Version-0.0.3-blue&quot;, no_badge: true)
</code></pre>

<p><strong>Note</strong> If you want to reset the badge back to default you can use <code>sh "git checkout -- &lt;path&gt;/Assets.xcassets/"</code></p>
<h3 id="update_urban_airship_configuration">update_urban_airship_configuration</h3>
<p>Easily update the AirshipConfig.plist for different deployment targets.</p>
<pre><code class="ruby">update_urban_airship_configuration(
  plist_path: &quot;AirshipConfig.plist&quot;,
  production_app_key: &quot;PRODKEY&quot;,
  production_app_secret: &quot;PRODSECRET&quot;
)
</code></pre>

<h2 id="developer-portal">Developer Portal</h2>
<h3 id="match"><a href="https://github.com/fastlane/fastlane/tree/master/match">match</a></h3>
<p>Check out <a href="https://codesigning.guide">codesigning.guide</a> for more information about the concept of <a href="https://github.com/fastlane/fastlane/tree/master/match">match</a>.</p>
<p><code>match</code> allows you to easily sync your certificates and profiles across your team using git. More information on <a href="https://github.com/fastlane/fastlane/tree/master/match">GitHub</a>.</p>
<pre><code class="ruby">match(type: &quot;appstore&quot;, app_identifier: &quot;tools.fastlane.app&quot;)
match(type: &quot;development&quot;, readonly: true)
</code></pre>

<h3 id="sigh"><a href="https://github.com/fastlane/fastlane/tree/master/sigh">sigh</a></h3>
<p><strong>Note</strong>: It is recommended to use <a href="https://github.com/fastlane/fastlane/tree/master/match">match</a> according to the <a href="https://codesigning.guide">codesigning.guide</a> for generating and maintaining your provisioning profiles. Use <code>sigh</code> directly only if you want full control over what's going on and know more about codesigning.</p>
<p>This will generate and download your App Store provisioning profile. <code>sigh</code> will store the generated profile in the current folder.</p>
<pre><code class="ruby">sigh
</code></pre>

<p>You can pass all options listed in <code>sigh --help</code> in <code>fastlane</code>:</p>
<pre><code class="ruby">sigh(
  adhoc: true,
  force: true,
  filename: &quot;myFile.mobileprovision&quot;
)
</code></pre>

<p>See how <a href="https://github.com/fastlane/examples/blob/master/Wikipedia/Fastfile">Wikpedia</a> uses <code>sigh</code> to automatically retrieve the latest provisioning profile.</p>
<h3 id="pem"><a href="https://github.com/fastlane/fastlane/tree/master/PEM">PEM</a></h3>
<p>This will generate a new push profile if necessary (the old one is about to expire).</p>
<p>Use it like this:</p>
<pre><code class="ruby">pem
</code></pre>

<pre><code class="ruby">pem(
  force: true, # create a new profile, even if the old one is still valid
  app_identifier: 'net.sunapps.9', # optional app identifier,
  save_private_key: true,
  new_profile: proc do |profile_path| # this block gets called when a new profile was generated
    puts profile_path # the absolute path to the new PEM file
    # insert the code to upload the PEM file to the server
  end
)
</code></pre>

<p>Use the <code>fastlane action pem</code> command to view all available options.</p>
<p><a href="https://github.com/fastlane/examples/blob/master/ProductHunt/Fastfile">Product Hunt</a> uses <code>PEM</code> to automatically create a new push profile for Parse.com if necessary before a release.</p>
<h3 id="cert"><a href="https://github.com/fastlane/fastlane/tree/master/cert">cert</a></h3>
<p><strong>Note</strong>: It is recommended to use <a href="https://github.com/fastlane/fastlane/tree/master/match">match</a> according to the <a href="https://codesigning.guide">codesigning.guide</a> for generating and maintaining your certificates. Use <code>cert</code> directly only if you want full control over what's going on and know more about codesigning.</p>
<p>The <code>cert</code> action can be used to make sure to have the latest signing certificate installed. More information on the <a href="https://github.com/fastlane/fastlane/tree/master/cert"><code>cert</code> project page</a>.</p>
<pre><code class="ruby">cert
</code></pre>

<p><code>fastlane</code> will automatically pass the signing certificate to use to <code>sigh</code>.</p>
<p>You can pass all options listed in <code>sigh --help</code> in <code>fastlane</code>:</p>
<pre><code class="ruby">cert(
  development: true,
  username: &quot;user@email.com&quot;
)
</code></pre>

<h3 id="produce"><a href="https://github.com/fastlane/fastlane/tree/master/produce">produce</a></h3>
<p>Create new apps on iTunes Connect and Apple Developer Portal. If the app already exists, <code>produce</code> will not do anything.</p>
<pre><code class="ruby">produce(
  username: 'felix@krausefx.com',
  app_identifier: 'com.krausefx.app',
  app_name: 'MyApp',
  language: 'English',
  version: '1.0',
  sku: 123,
  team_name: 'SunApps GmbH' # Only necessary when in multiple teams.
)
</code></pre>

<p><a href="https://github.com/fastlane/examples/blob/master/SunApps/Fastfile#L41-L49">SunApps</a> uses <code>produce</code> to automatically generate new apps for new customers.</p>
<h3 id="register_devices">register_devices</h3>
<p>This will register iOS devices with the Developer Portal so that you can include them in your provisioning profiles.</p>
<p>This is an optimistic action, in that it will only ever add new devices to the member center, and never remove devices. If a device which has already been registered within the member center is not passed to this action, it will be left alone in the member center and continue to work.</p>
<p>The action will connect to the Apple Developer Portal using the username you specified in your <code>Appfile</code> with <code>apple_id</code>, but you can override it using the <code>username</code> option, or by setting the env variable <code>ENV['DELIVER_USER']</code>.</p>
<pre><code class="ruby"># Simply provide a list of devices as a Hash
register_devices(
  devices: {
    'Luka iPhone 6' =&gt; '1234567890123456789012345678901234567890',
    'Felix iPad Air 2' =&gt; 'abcdefghijklmnopqrstvuwxyzabcdefghijklmn',
  }
)

# Alternatively provide a standard UDID export .txt file, see the Apple Sample (https://devimages.apple.com.edgekey.net/downloads/devices/Multiple-Upload-Samples.zip)
register_devices(
  devices_file: './devices.txt'
)

# Advanced
register_devices(
  devices_file: './devices.txt', # You must pass in either `devices_file` or `devices`.
  team_id: 'XXXXXXXXXX',         # Optional, if you're a member of multiple teams, then you need to pass the team ID here.
  username: 'luka@goonbee.com'   # Optional, lets you override the Apple Member Center username.
)
</code></pre>

<h2 id="using-git">Using git</h2>
<h3 id="changelog_from_git_commits">changelog_from_git_commits</h3>
<p>This action turns your git commit history into formatted changelog text.</p>
<pre><code class="ruby"># Collects commits since your last tag and returns a concatenation of their subjects and bodies
changelog_from_git_commits

# Advanced options
changelog_from_git_commits(
  between: ['7b092b3', 'HEAD'], # Optional, lets you specify a revision/tag range between which to collect commit info
  pretty: '- (%ae) %s', # Optional, lets you provide a custom format to apply to each commit when generating the changelog text
  tag_match_pattern: nil, # Optional, lets you search for a tag name that matches a glob(7) pattern
  match_lightweight_tag: false, # Optional, lets you ignore lightweight (non-annotated) tags when searching for the last tag
  include_merges: true # Optional, lets you filter out merge commits
)
</code></pre>

<h3 id="ensure_git_branch">ensure_git_branch</h3>
<p>This action will check if your git repo is checked out to a specific branch. You may only want to make releases from a specific branch, so <code>ensure_git_branch</code> will stop a lane if it was accidentally executed on an incorrect branch.</p>
<pre><code class="ruby">ensure_git_branch # defaults to `master` branch

ensure_git_branch(
  branch: 'develop'
)
</code></pre>

<h3 id="last_git_tag">last_git_tag</h3>
<p>Simple action to get the latest git tag</p>
<pre><code class="ruby">last_git_tag
</code></pre>

<p>If you are using this action on a <strong>shallow clone</strong>, <em>the default with some CI systems like Bamboo</em>, you need to ensure that you have also have pulled all the git tags appropriately.  Assuming your git repo has the correct remote set you can issue <code>sh("git fetch --tags")</code></p>
<pre><code class="ruby">  #Only fetch tags if a remote is set
  remote_count = sh(&quot;git remote show | wc -l&quot;)
  if remote_count &gt; 0.to_s
    sh(&quot;git fetch --tags&quot;)
    last_git_tag
  end
</code></pre>

<h3 id="git_branch">git_branch</h3>
<p>Quickly get the name of the branch you're currently in</p>
<pre><code class="ruby">git_branch
</code></pre>

<h3 id="git_tag_exists">git_tag_exists</h3>
<p>Checks whether the given tag exists in the repo</p>
<pre><code class="ruby">if git_tag_exists(tag: &quot;1.1.0&quot;)
  UI.message(&quot;Found it 🚀&quot;)
end
</code></pre>

<h3 id="git_add">git_add</h3>
<p>To simply add one file before commit use</p>
<pre><code class="ruby">git_add(path: &quot;./version.txt&quot;)
</code></pre>

<p>To add several files before commit use</p>
<pre><code class="ruby">git_add(path: [&quot;./version.txt&quot;, &quot;./changelog.txt&quot;])
</code></pre>

<h3 id="git_commit">git_commit</h3>
<p>To simply commit one file with a certain commit message use</p>
<pre><code class="ruby">git_commit(path: &quot;./version.txt&quot;,
        message: &quot;Version Bump&quot;)
</code></pre>

<p>To commit several files with a certain commit message use</p>
<pre><code class="ruby">git_commit(path: [&quot;./version.txt&quot;, &quot;./changelog.txt&quot;]
        message: &quot;Version Bump&quot;)
</code></pre>

<h3 id="ensure_git_status_clean">ensure_git_status_clean</h3>
<p>A sanity check to make sure you are working in a repo that is clean. Especially useful to put at the beginning of your Fastfile in the <code>before_all</code> block, if some of your other actions will touch your filesystem, do things to your git repo, or just as a general reminder to save your work. Also needed as a prerequisite for some other actions like <code>reset_git_repo</code>.</p>
<pre><code class="ruby">ensure_git_status_clean
</code></pre>

<p><a href="https://github.com/fastlane/examples/blob/master/Wikipedia/Fastfile">Wikipedia</a> uses <code>ensure_git_status_clean</code> to make sure, no uncommited changes are deployed by `fastlane.</p>
<h3 id="commit_version_bump">commit_version_bump</h3>
<p>This action will create a "Version Bump" commit in your repo. Useful in conjunction with <code>increment_build_number</code>.</p>
<p>It checks the repo to make sure that only the relevant files have changed, these are the files that <code>increment_build_number</code> (<code>agvtool</code>) touches:
- All .plist files
- The <code>.xcodeproj/project.pbxproj</code> file</p>
<p>Then commits those files to the repo.</p>
<p>Customise the message with the <code>:message</code> option, defaults to "Version Bump"</p>
<p>If you have other uncommitted changes in your repo, this action will fail. If you started off in a clean repo, and used the <code>ipa</code> and or <code>sigh</code> actions, then you can use the <code>clean_build_artifacts</code> action to clean those temporary files up before running this action.</p>
<pre><code class="ruby">commit_version_bump

commit_version_bump(
  message: 'Version Bump',                    # create a commit with a custom message
  xcodeproj: './path/to/MyProject.xcodeproj', # optional, if you have multiple Xcode project files, you must specify your main project here
)
</code></pre>

<p><a href="https://github.com/fastlane/examples/blob/master/Artsy/eidolon/Fastfile">Artsy</a> uses <code>fastlane</code> to automatically commit the version bump, add a new git tag and push everything back to <code>master</code>.</p>
<h3 id="number_of_commits">number_of_commits</h3>
<p>You can use this action to get the number of commits of this repo. This is useful if you want to set the build number to the number of commits.</p>
<pre><code class="ruby">build_number = number_of_commits
increment_build_number(build_number: build_number)
</code></pre>

<h3 id="add_git_tag">add_git_tag</h3>
<p>This will automatically tag your build with the following format: <code>&lt;grouping&gt;/&lt;lane&gt;/&lt;prefix&gt;&lt;build_number&gt;</code>, where:</p>
<ul>
<li><code>grouping</code> is just to keep your tags organised under one "folder", defaults to 'builds'</li>
<li><code>lane</code> is the name of the current fastlane lane</li>
<li><code>prefix</code> is anything you want to stick in front of the version number, e.g. "v"</li>
<li><code>build_number</code> is the build number, which defaults to the value emitted by the <code>increment_build_number</code> action</li>
</ul>
<p>For example for build 1234 in the "appstore" lane it will tag the commit with <code>builds/appstore/1234</code></p>
<pre><code class="ruby">add_git_tag # simple tag with default values

add_git_tag(
  grouping: 'fastlane-builds',
  prefix: 'v',
  build_number: 123
)
</code></pre>

<p>Alternatively, you can specify your own tag. Note that if you do specify a tag, all other arguments are ignored.</p>
<pre><code class="ruby">add_git_tag(
  tag: 'my_custom_tag'
)
</code></pre>

<p><a href="https://github.com/fastlane/examples/blob/master/Artsy/eidolon/Fastfile#L105">Artsy</a> uses <code>fastlane</code> to automatically commit the version bump, add a new git tag and push everything back to <code>master</code>.</p>
<h3 id="git_pull">git_pull</h3>
<p>Executes a simple <code>git pull --tags</code> command</p>
<h3 id="push_to_git_remote">push_to_git_remote</h3>
<p>Lets you push your local commits to a remote git repo. Useful if you make local changes such as adding a version bump commit (using <code>commit_version_bump</code>) or a git tag (using 'add_git_tag') on a CI server, and you want to push those changes back to your canonical/main repo.</p>
<p>Tags will be pushed as well by default, except when setting the option 'tags' to false.</p>
<pre><code class="ruby">push_to_git_remote # simple version. pushes 'master' branch to 'origin' remote

push_to_git_remote(
  remote: 'origin',         # optional, default: 'origin'
  local_branch: 'develop',  # optional, aliased by 'branch', default: 'master'
  remote_branch: 'develop', # optional, default is set to local_branch
  force: true,              # optional, default: false
  tags: false               # optional, default: true
)
</code></pre>

<p><a href="https://github.com/fastlane/examples/blob/master/Artsy/eidolon/Fastfile">Artsy</a> uses <code>fastlane</code> to automatically commit the version bump, add a new git tag and push everything back to <code>master</code>.</p>
<h3 id="push_git_tags">push_git_tags</h3>
<p>If you only want to push the tags and nothing else, you can use the <code>push_git_tags</code> action:</p>
<pre><code class="ruby">push_git_tags
</code></pre>

<h3 id="reset_git_repo">reset_git_repo</h3>
<p>This action will reset your git repo to a clean state, discarding any uncommitted and untracked changes. Useful in case you need to revert the repo back to a clean state, e.g. after the fastlane run.
Untracked files like <code>.env</code> will also be deleted, unless <code>:skip_clean</code> is true.</p>
<p>It's a pretty drastic action so it comes with a sort of safety latch. It will only proceed with the reset if either of these conditions are met:</p>
<ul>
<li>You have called the <code>ensure_git_status_clean</code> action prior to calling this action. This ensures that your repo started off in a clean state, so the only things that will get destroyed by this action are files that are created as a byproduct of the fastlane run.</li>
<li>You call it with the <code>force: true</code> option, in which case "you have been warned".</li>
</ul>
<p>Also useful for putting in your <code>error</code> block, to bring things back to a pristine state (again with the caveat that you have called <code>ensure_git_status_clean</code> before)</p>
<pre><code class="ruby">reset_git_repo
reset_git_repo(force: true) # If you don't care about warnings and are absolutely sure that you want to discard all changes. This will reset the repo even if you have valuable uncommitted changes, so use with care!
reset_git_repo(skip_clean: true) # If you want 'git clean' to be skipped, thus NOT deleting untracked files like '.env'. Optional, defaults to false.

# You can also specify a list of files that should be reset.
reset_git_repo(
  force: true,
  files: [
    &quot;./file.txt&quot;
  ])
</code></pre>

<p><a href="https://github.com/fastlane/examples/blob/master/MindNode/Fastfile">MindNode</a> uses this action to reset temporary changes of the project configuration after successfully building it.</p>
<h3 id="get_github_release">get_github_release</h3>
<p>You can easily receive information about a specific release from GitHub.com</p>
<pre><code class="ruby">release = get_github_release(url: &quot;fastlane/fastlane&quot;, version: &quot;1.0.0&quot;)
puts release['name']
</code></pre>

<p>To get a list of all available values run <code>fastlane action get_github_release</code>.</p>
<h3 id="import_from_git">import_from_git</h3>
<p>Import another Fastfile from a remote git repository to use its lanes.</p>
<p>This is useful if you have shared lanes across multiple apps and you want to store the Fastfile in a remote git repository.</p>
<pre><code class="ruby">import_from_git(
  url: 'git@github.com:fastlane/fastlane.git', # The url of the repository to import the Fastfile from.
  branch: 'HEAD', # The branch to checkout on the repository. Defaults to `HEAD`.
  path: 'fastlane/Fastfile' # The path of the Fastfile in the repository. Defaults to `fastlane/Fastfile`.
)
</code></pre>

<h3 id="last_git_commit">last_git_commit</h3>
<p>Get information about the last git commit, returns the commit hash, the abbreviated commit hash, the author and the git message.</p>
<pre><code class="ruby">commit = last_git_commit
crashlytics(notes: commit[:message]) # message of commit
author = commit[:author] # author of the commit
hash = commit[:commit_hash] # long sha of commit
short_hash = commit[:abbreviated_commit_hash] # short sha of commit
</code></pre>

<h3 id="create_pull_request">create_pull_request</h3>
<p>Create a new pull request.</p>
<pre><code class="ruby">create_pull_request(
  api_token: ENV['GITHUB_TOKEN'],
  repo: 'fastlane/fastlane',
  title: 'Amazing new feature',
  head: 'my-feature',                 # optional, defaults to current branch name.
  base: 'master',                     # optional, defaults to 'master'.
  body: 'Please pull this in!',       # optional
  api_url: 'http://yourdomain/api/v3' # optional, for Github Enterprise, defaults to 'https://api.github.com'.
)
</code></pre>

<h2 id="using-mercurial">Using mercurial</h2>
<h3 id="hg_ensure_clean_status">hg_ensure_clean_status</h3>
<p>Along the same lines as the <a href="#ensure_git_status_clean"><code>ensure_git_status_clean</code></a> action, this is a sanity check to ensure the working mercurial repo is clean. Especially useful to put at the beginning of your Fastfile in the <code>before_all</code> block.</p>
<pre><code class="ruby">hg_ensure_clean_status
</code></pre>

<h3 id="hg_commit_version_bump">hg_commit_version_bump</h3>
<p>The mercurial equivalent of the <a href="#commit_version_bump"><code>commit_version_bump</code></a> git action. Like the git version, it is useful in conjunction with <a href="#increment_build_number"><code>increment_build_number</code></a>.</p>
<p>It checks the repo to make sure that only the relevant files have changed, these are the files that <code>increment_build_number</code> (<code>agvtool</code>) touches:
- All .plist files
- The <code>.xcodeproj/project.pbxproj</code> file</p>
<p>Then commits those files to the repo.</p>
<p>Customise the message with the <code>:message</code> option, defaults to "Version Bump"</p>
<p>If you have other uncommitted changes in your repo, this action will fail. If you started off in a clean repo, and used the <code>ipa</code> and or <code>sigh</code> actions, then you can use the <a href="#clean_build_artifacts"><code>clean_build_artifacts</code></a> action to clean those temporary files up before running this action.</p>
<pre><code class="ruby">hg_commit_version_bump

hg_commit_version_bump(
  message: 'Version Bump',                    # create a commit with a custom message
  xcodeproj: './path/to/MyProject.xcodeproj', # optional, if you have multiple Xcode project files, you must specify your main project here
)
</code></pre>

<h3 id="hg_add_tag">hg_add_tag</h3>
<p>A simplified version of git action <a href="#add_git_tag"><code>add_git_tag</code></a>. It adds a given tag to the mercurial repo.</p>
<p>Specify the tag name with the <code>:tag</code> option.</p>
<pre><code class="ruby">hg_add_tag tag: version_number
</code></pre>

<h3 id="hg_push">hg_push</h3>
<p>The mercurial equivalent of <a href="#push_to_git_remote"><code>push_to_git_remote</code></a> — pushes your local commits to a remote mercurial repo. Useful when local changes such as adding a version bump commit or adding a tag are part of your lane’s actions.</p>
<pre><code class="ruby">hg_push # simple version. pushes commits from current branch to default destination

hg_push(
  destination: 'ssh://hg@repohost.com/owner/repo', # optional
  force: true,                                     # optional, default: false
)
</code></pre>

<h2 id="notifications">Notifications</h2>
<h3 id="slack"><a href="http://slack.com">Slack</a></h3>
<p>Create an Incoming WebHook and export this as <code>SLACK_URL</code>. Can send a message to <strong>#channel</strong> (by default), a direct message to <strong>@username</strong> or a message to a private group <strong>group</strong> with success (green) or failure (red) status.</p>
<pre><code class="ruby">slack(
  message: &quot;App successfully released!&quot;
)

slack(
  message: &quot;App successfully released!&quot;,
  channel: &quot;#channel&quot;,  # Optional, by default will post to the default channel configured for the POST URL.
  success: true,        # Optional, defaults to true.
  payload: {            # Optional, lets you specify any number of your own Slack attachments.
    'Build Date' =&gt; Time.new.to_s,
    'Built by' =&gt; 'Jenkins',
  },
  default_payloads: [:git_branch, :git_author], # Optional, lets you specify a whitelist of default payloads to include. Pass an empty array to suppress all the default payloads. Don't add this key, or pass nil, if you want all the default payloads. The available default payloads are: `lane`, `test_result`, `git_branch`, `git_author`, `last_git_commit_message`.
  attachment_properties: { # Optional, lets you specify any other properties available for attachments in the slack API (see https://api.slack.com/docs/attachments). This hash is deep merged with the existing properties set using the other properties above. This allows your own fields properties to be appended to the existing fields that were created using the `payload` property for instance.
    thumb_url: 'http://example.com/path/to/thumb.png',
    fields: [{
      title: 'My Field',
      value: 'My Value',
      short: true
    }]
  }
)
</code></pre>

<p>Take a look at the <a href="https://github.com/fastlane/examples">example projects</a> of how you can use the slack action, for example the <a href="https://github.com/fastlane/examples/blob/master/MindNode/Fastfile">MindNode configuration</a>.</p>
<h3 id="mailgun"><a href="http://www.mailgun.com">Mailgun</a></h3>
<p>Send email notifications right from <code>fastlane</code> using <a href="http://www.mailgun.com">Mailgun</a>.</p>
<pre><code class="ruby">ENV['MAILGUN_SANDBOX_POSTMASTER'] ||= &quot;MY_POSTMASTER&quot;
ENV['MAILGUN_APIKEY'] = &quot;MY_API_KEY&quot;
ENV['MAILGUN_APP_LINK'] = &quot;MY_APP_LINK&quot;

mailgun(
  to: &quot;fastlane@krausefx.com&quot;,
  success: true,
  message: &quot;This is the mail's content&quot;
)

or

mailgun(
  postmaster: &quot;MY_POSTMASTER&quot;,
  apikey: &quot;MY_API_KEY&quot;,
  to: &quot;DESTINATION_EMAIL&quot;,
  from: &quot;EMAIL_FROM_NAME&quot;,
  success: true,
  message: &quot;Mail Body&quot;,
  app_link: &quot;http://www.myapplink.com&quot;,
  ci_build_link: &quot;http://www.mycibuildlink.com&quot;,
  template_path: &quot;HTML_TEMPLATE_PATH&quot;
)
</code></pre>

<h3 id="hipchat"><a href="http://www.hipchat.com/">HipChat</a></h3>
<p>Send a message to <strong>room</strong> (by default) or a direct message to <strong>@username</strong> with success (green) or failure (red) status.</p>
<pre><code class="ruby">  ENV[&quot;HIPCHAT_API_TOKEN&quot;] = &quot;Your API token&quot;
  ENV[&quot;HIPCHAT_API_VERSION&quot;] = &quot;1 for API version 1 or 2 for API version 2&quot;

  hipchat(
    message: &quot;App successfully released!&quot;,
    message_format: &quot;html&quot;, # or &quot;text&quot;, defaults to &quot;html&quot;
    channel: &quot;Room or @username&quot;,
    success: true
  )
</code></pre>

<h3 id="typetalk"><a href="https://typetalk.in/">Typetalk</a></h3>
<p>Send a message to <strong>topic</strong> with success (:smile:) or failure (:rage:) status.
<a href="https://developer.nulab-inc.com/docs/typetalk/auth#tttoken">Using Bot's Typetalk Token</a></p>
<pre><code class="ruby">  typetalk(
    message: &quot;App successfully released!&quot;,
    note_path: 'ChangeLog.md',
    topicId: 1,
    success: true,
    typetalk_token: 'Your Typetalk Token'
  )
</code></pre>

<h3 id="chatwork"><a href="http://www.chatwork.com/">ChatWork</a></h3>
<p>Post a message to a <strong>group chat</strong>.</p>
<p><a href="http://developer.chatwork.com/ja/authenticate.html">How to authenticate ChatWork API</a></p>
<pre><code class="ruby">  ENV[&quot;CHATWORK_API_TOKEN&quot;] = &quot;Your API token&quot;

  chatwork(
    message: &quot;App successfully released!&quot;,
    roomid: 12345,
    success: true
  )
</code></pre>

<h3 id="notification">Notification</h3>
<p>Display a notification using the macOS notification center. Uses <a href="https://github.com/alloy/terminal-notifier">terminal-notifier</a>.</p>
<pre><code class="ruby">  notification(subtitle: &quot;Finished Building&quot;, message: &quot;Ready to upload...&quot;)
</code></pre>

<p><a href="https://github.com/fastlane/examples/blob/master/BeMyEyes/Fastfile">ByMyEyes</a> uses the <code>notify</code> action to show a success message after <code>fastlane</code> finished executing.</p>
<h3 id="testmunk"><a href="http://testmunk.com">Testmunk</a></h3>
<p>Run your functional tests on real iOS devices over the cloud (for free on an iPod). With this simple <a href="https://github.com/testmunk/TMSample/blob/master/testcases/smoke/smoke_features.zip">testcase</a> you can ensure your app launches and there is no crash at launch. Tests can be extended with <a href="http://docs.testmunk.com/en/latest/steps.html">Testmunk's library</a> or custom steps. More details about this action can be found in <a href="https://github.com/fastlane/fastlane/blob/master/lib/fastlane/actions/testmunk.rb"><code>testmunk.rb</code></a>.</p>
<pre><code class="ruby">ENV['TESTMUNK_EMAIL'] = 'email@email.com'
# Additionally, you have to set TESTMUNK_API, TESTMUNK_APP and TESTMUNK_IPA
testmunk
</code></pre>

<h3 id="podio"><a href="http://podio.com">Podio</a></h3>
<p>Creates an item within your Podio app. In case an item with the given identifying value already exists within your Podio app, it updates that item. To find out how to get your authentication credentials see <a href="https://developers.podio.com">Podio API documentation</a>. To find out how to get your identifying field (external ID) and general info about Podio item see <a href="https://developers.podio.com/examples/items">tutorials</a>.</p>
<pre><code class="ruby">ENV[&quot;PODIO_ITEM_IDENTIFYING_FIELD&quot;] = &quot;String specifying the field key used for identification of an item&quot;

podio_item(
  identifying_value: &quot;Your unique value&quot;,
  other_fields: {
    &quot;field1&quot; =&gt; &quot;fieldValue&quot;,
    &quot;field2&quot; =&gt; &quot;fieldValue2&quot;
  }
)
</code></pre>

<p>To see all environment values, please run <code>fastlane action podio_item</code>.</p>
<h3 id="onesignal"><a href="https://onesignal.com">OneSignal</a></h3>
<p>Create a onesignal app for managing push notifications</p>
<pre><code class="ruby">ENV[&quot;ONE_SIGNAL_APP_ID&quot;] = &quot;Resulting OneSignal app ID&quot;
ENV[&quot;ONE_SIGNAL_APP_AUTH_KEY&quot;] = &quot;Auth key for the created App&quot;

onesignal(
  auth_token: &quot;Your OneSignal Auth Token&quot;,
  app_name: &quot;Name for OneSignal App&quot;,
  android_token: &quot;Your Android GCM key (optional)&quot;,
  apns_p12: &quot;Path to Apple .p12 file (optional)&quot;
  apns_p12_password: &quot;Password for .p12 file (optional)&quot;
  apns_env: &quot;production/sandbox (defaults to production)&quot;
)
</code></pre>

<h3 id="flock"><a href="http://flock.co">Flock</a></h3>
<p>Send a text message to a Flock group.</p>
<pre><code class="ruby">flock(
  message: &quot;Hello&quot;
  token: &quot;xxx&quot;
)
</code></pre>

<p>To obtain the token, create a new
<a href="https://dev.flock.co/wiki/display/FlockAPI/Incoming+Webhooks">incoming message webhook</a>
in your Flock admin panel.</p>
<h3 id="jira"><a href="https://www.atlassian.com/software/jira">JIRA</a></h3>
<p>Leave a comment on a JIRA ticket.</p>
<pre><code class="ruby">jira(
  url: &quot;https://bugs.yourdomain.com&quot;,
  username: &quot;Your username&quot;,
  password: &quot;Your password&quot;,
  ticket_id: &quot;Ticket ID, i.e. IOS-123&quot;,
  comment_text: &quot;Text to post as a comment&quot;
)
</code></pre>

<h2 id="other">Other</h2>
<h3 id="update_fastlane">update_fastlane</h3>
<p>This action will look at all installed fastlane tools and update them to the next available minor version - major version updates will not be performed automatically, as they might include breaking changes. If an update was performed, fastlane will be restarted before the run continues.</p>
<p>If you are using rbenv or rvm, everything should be good to go. However, if you are using the system's default ruby, some additional setup is needed for this action to work correctly. In short, fastlane needs to be able to access your gem library without running in <code>sudo</code> mode.</p>
<p>The simplest possible fix for this is putting the following lines into your <code>~/.bashrc</code> or <code>~/.zshrc</code> file:</p>
<pre><code class="bash">export GEM_HOME=~/.gems
export PATH=$PATH:~/.gems/bin
</code></pre>

<p>After the above changes, restart your terminal, then run <code>mkdir $GEM_HOME</code> to create the new gem directory. After this, you're good to go!</p>
<p>Recommended usage of the <code>update_fastlane</code> action is at the top of the <code>before_all</code> block, before running any other action:</p>
<pre><code class="ruby">before_all do
  update_fastlane

  cocoapods
  increment_build_number
  ...
end
</code></pre>

<h3 id="sonar">sonar</h3>
<p>This action will execute <code>sonar-runner</code> to run SonarQube analysis on your source code.</p>
<pre><code class="ruby">sonar(
  project_key: &quot;name.gretzki.awesomeApp&quot;,
  project_version: &quot;1.0&quot;,
  project_name: &quot;iOS - AwesomeApp&quot;,
  sources_path: File.expand_path(&quot;../AwesomeApp&quot;)
)
</code></pre>

<p>It can process unit test results if formatted as junit report as shown in <a href="#xctest">xctest</a> action. It can also integrate coverage reports in Cobertura format, which can be transformed into by <a href="#slather">slather</a> action.</p>
<h3 id="setup_jenkins">setup_jenkins</h3>
<p>This action helps with Jenkins integration. Creates own derived data for each job. All build results like IPA files and archives will be stored in the <code>./output</code> directory. The action also works with <a href="https://wiki.jenkins-ci.org/display/JENKINS/Keychains+and+Provisioning+Profiles+Plugin">Keychains and Provisioning Profiles Plugin</a>, selected keychain will be automatically unlocked and the selected code signing identity will be used. By default this action will only work when fastlane is executed on a CI system.</p>
<pre><code class="ruby">setup_jenkins
</code></pre>

<h2 id="misc">Misc</h2>
<h3 id="adb">adb</h3>
<p>Lets you execute adb commands.</p>
<pre><code class="ruby">adb(
  command: &quot;shell ls&quot;,
)
</code></pre>

<h3 id="adb_devices">adb_devices</h3>
<p>Returns an array of all currently connected android devices.
e.g.: run an adb command on all connected devices.</p>
<pre><code>adb_devices.each  do | device |
  model = adb(command: &quot;shell getprop ro.product.model&quot;,
              serial: device.serial
             ).strip
  puts &quot;Model #{model} is connected&quot;
end
</code></pre>

<h3 id="twitter">twitter</h3>
<p>Post a tweet on twitter. Requires you to setup an app on twitter.com and obtain consumer and access_token.</p>
<pre><code class="ruby">twitter(
  access_token: &quot;XXXX&quot;,
  access_token_secret: &quot;xxx&quot;,
  consumer_key: &quot;xxx&quot;,
  consumer_secret: &quot;xxx&quot;,
  message: &quot;You rock!&quot;
)
</code></pre>

<h3 id="erb">erb</h3>
<p>Parses a given ERB template file (passes <code>placeholders</code> as a binding), and saves the rendered output to destination. If no destination is given, it returns the rendered output as a string.</p>
<p>Example <code>erb</code> template:</p>
<pre><code>Variable1 &lt;%= var1 %&gt;
Variable2 &lt;%= var2 %&gt;
&lt;% for item in var3 %&gt;
        &lt;%= item %&gt;
&lt;% end %&gt;
</code></pre>

<pre><code class="ruby">erb(
  template: &quot;1.erb&quot;,
  destination: &quot;/tmp/rendered.out&quot;,
  placeholders: {
    :var1 =&gt; 123,
    :var2 =&gt; &quot;string&quot;,
    :var3 =&gt; [&quot;element1&quot;, &quot;element2&quot;]
  }
)
</code></pre>

<h3 id="appledoc">appledoc</h3>
<p>Generate Apple-like source code documentation from specially formatted source code comments.</p>
<pre><code class="ruby">appledoc(
  project_name: &quot;MyProjectName&quot;,
  project_company: &quot;Company Name&quot;,
  input: &quot;MyProjectSources&quot;,
  ignore: [
    'ignore/path/1',
    'ingore/path/2'
  ],
  options: &quot;--keep-intermediate-files --search-undocumented-doc&quot;,
  warnings: &quot;--warn-missing-output-path --warn-missing-company-id&quot;
)
</code></pre>

<p>Use <code>appledoc --help</code> to see the list of all command line options.</p>
<h3 id="download">download</h3>
<p>Download a file from a remote server (e.g. JSON file)</p>
<pre><code class="ruby">data = download(url: &quot;https://host.com/api.json&quot;)

# Print information
puts data[&quot;users&quot;].first[&quot;name&quot;]

# Iterate
data[&quot;users&quot;].each do |user|
  puts user[&quot;name&quot;]
end
</code></pre>

<h3 id="version_get_podspec">version_get_podspec</h3>
<p>To receive the current version number from your <code>.podspec</code> file use</p>
<pre><code class="ruby">version = version_get_podspec(path: &quot;TSMessages.podspec&quot;)
</code></pre>

<h3 id="version_bump_podspec">version_bump_podspec</h3>
<p>To increment the version number of your <code>.podspec</code> use</p>
<pre><code class="ruby">version = version_bump_podspec(path: &quot;TSMessages.podspec&quot;, bump_type: &quot;patch&quot;)
# or
version = version_bump_podspec(path: &quot;TSMessages.podspec&quot;, version_number: &quot;1.4&quot;)
</code></pre>

<h3 id="get_info_plist_value">get_info_plist_value</h3>
<p>Get a value from a plist file, which can be used to fetch the app identifier and more information about your app</p>
<pre><code class="ruby">identifier = get_info_plist_value(path: './Info.plist', key: 'CFBundleIdentifier')
puts identifier # =&gt; com.krausefx.app
</code></pre>

<h3 id="set_info_plist_value">set_info_plist_value</h3>
<p>Set a value of a plist file. You can use this action to update the bundle identifier of your app</p>
<pre><code class="ruby">set_info_plist_value(path: './Info.plist', key: 'CFBundleIdentifier', value: &quot;com.krausefx.app.beta&quot;)
</code></pre>

<h3 id="say">say</h3>
<p>To speak out a text</p>
<pre><code class="ruby">say &quot;I can speak&quot;
</code></pre>

<h3 id="clipboard">clipboard</h3>
<p>You can store a string in the clipboard running</p>
<pre><code class="ruby">clipboard(value: &quot;https://github.com/fastlane/fastlane/tree/master/fastlane&quot;)
</code></pre>

<p>This can be used to store some generated URL or value for easy copy &amp; paste (e.g. the download link):</p>
<pre><code class="ruby">clipboard(value: lane_context[SharedValues::HOCKEY_DOWNLOAD_LINK])
</code></pre>

<h3 id="cloc"><a href="https://github.com/AlDanial/cloc">CLOC</a></h3>
<p>You can generate a Line Count (that is readable by Jenkins - see the <a href="https://wiki.jenkins-ci.org/display/JENKINS/SLOCCount+Plugin">SLOCCount Plugin</a> for more details).  This action is a wrapper around the cloc tool:</p>
<pre><code class="ruby"># Result will be an XML report file: reports/cloc.xml
cloc(exclude_dir: 'ThirdParty,Resources', output_directory: 'reports', source_directory: 'MyCoolApp')
</code></pre>

<h3 id="is_ci">is_ci?</h3>
<p>Is the current run being executed on a CI system, like Jenkins or Travis?</p>
<pre><code class="ruby">if is_ci?
  puts &quot;I'm a computer&quot;
else
  say &quot;Hi Human!&quot;
end
</code></pre>

<h3 id="verify_build">verify_build</h3>
<p>Verifies that the built app was built using the expected build resources. This is relevant for people who build on machines that are used to build apps with different profiles, certificates and/or bundle identifiers to guard against configuration mistakes.</p>
<p>Add this action to appropriate lanes and assign some values to verify, like:</p>
<pre><code class="ruby">verify_build(
  provisioning_type: 'distribution',
  bundle_identifier: 'com.example.myapp'
)
</code></pre>

<p>You can verify the following items:
- app_name
- bundle_identifier
- provisioning_type
- provisioning_uuid
- team_identifier
- team_name</p>
<h3 id="verify_pod_keys">verify_pod_keys</h3>
<p>Runs a check against all keys specified in your Podfile to make sure they're more than a single character long. This is to ensure you don't deploy with stubbed keys.</p>
<pre><code class="ruby">verify_pod_keys
</code></pre>

<p>Will raise an error if any key is empty or a single character.</p>
<h3 id="read_podspec">read_podspec</h3>
<p>Loads the specified (or the first found) podspec in the folder as JSON, so that you can inspect its <code>version</code>, <code>files</code> etc. This can be useful when basing your release process on the version string only stored in one place - in the podspec. As one of the first steps you'd read the podspec and its version and the rest of the workflow can use that version string (when e.g. creating a new git tag or a GitHub Release).</p>
<pre><code class="ruby">spec = read_podspec
version = spec['version']
puts &quot;Using Version #{version}&quot;
</code></pre>

<p>This will find the first podspec in the folder. You can also pass in the specific podspec path.</p>
<pre><code class="ruby">spec = read_podspec(path: &quot;./XcodeServerSDK.podspec&quot;)
</code></pre>

<h3 id="pod_push">pod_push</h3>
<p>Push a Podspec to Trunk or a private repository</p>
<pre><code class="ruby"># If no path is supplied then Trunk will attempt to find the first Podspec in the current directory.
pod_push

# Alternatively, supply the Podspec file path
pod_push(path: 'TSMessages.podspec')

# You may also push to a private repo instead of Trunk
pod_push(path: 'TSMessages.podspec', repo: 'MyRepo')

# If the podspec has a dependency on another private pod, then you will have to supply the sources you want the podspec to lint with for pod_push to succeed. Read more here - https://github.com/CocoaPods/CocoaPods/issues/2543.
pod_push(path: 'TMessages.podspec', repo: 'MyRepo', sources: ['https://github.com/MyGithubPage/Specs', 'https://github.com/CocoaPods/Specs'])
</code></pre>

<h3 id="clean_cocoapods_cache">clean_cocoapods_cache</h3>
<p>Cleanup the Cocoapods cache.</p>
<pre><code class="ruby"># Clean entire cocoapods cache.
clean_cocoapods_cache

# Alternatively, supply the name of pod to be removed from cache.
clean_cocoapods_cache(name: 'CACHED POD')
</code></pre>

<h3 id="prompt">prompt</h3>
<p>You can use <code>prompt</code> to ask the user for a value or to just let the user confirm the next step.
This action also supports multi-line inputs using the <code>multi_line_end_keyword</code> option.</p>
<pre><code class="ruby">changelog = prompt(text: &quot;Changelog: &quot;)
</code></pre>

<pre><code class="ruby">changelog = prompt(
  text: &quot;Changelog: &quot;,
  multi_line_end_keyword: &quot;END&quot;
)

hockey(notes: changelog)
</code></pre>

<h3 id="backup_file">backup_file</h3>
<p>This action backs up your file to <code>[path].back</code>.</p>
<pre><code class="ruby"># copies `file` to `/path/to/file.back`
backup_file(path: '/path/to/file')
</code></pre>

<h3 id="restore_file">restore_file</h3>
<p>This action restores a file previously backed up by the <code>backup_file</code> action.</p>
<pre><code class="ruby"># copies `file.back` to '/path/to/file'
restore_file(path: '/path/to/file')
</code></pre>

<h3 id="backup_xcarchive">backup_xcarchive</h3>
<p>Save your [zipped] xcarchive elsewhere from default path.</p>
<pre><code class="ruby">backup_xcarchive(
  xcarchive: '/path/to/file.xcarchive', # Optional if you use the `xcodebuild` action
  destination: '/somewhere/else/file.xcarchive', # Where the backup should be created
  zip: false, # Enable compression of the archive. Defaults to `true`.
  versioned: true # Create a versioned (date and app version) subfolder where to put the archive. Default value `true`
)
</code></pre>

<h3 id="debug">debug</h3>
<p>Print out an overview of the lane context values.</p>
<pre><code class="ruby">debug
</code></pre>

<h3 id="dotgpg_environment">dotgpg_environment</h3>
<p>Reads in production secrets set in a dotgpg file and puts them in ENV.</p>
<pre><code class="ruby">dotgpg_environment(dotgpg_file: './path/to/gpgfile')
</code></pre>

<h3 id="jazzy"><a href="https://github.com/Realm/jazzy">Jazzy</a></h3>
<p>Generate docs using <a href="https://github.com/Realm/jazzy">Jazzy</a></p>
<pre><code class="ruby">jazzy
</code></pre>

<h3 id="update_info_plist_1">update_info_plist</h3>
<p>Update an <code>Info.plist</code> with a bundle identifier and display name.</p>
<pre><code class="ruby">update_info_plist(
  xcodeproj: '/path/to/Project.xcodeproj', # Optional. Will pick the first `xcodeproj` in the directory if left blank
  plist_path: '/path/to/Info.plist', # Path to the info plist file
  app_identifier: 'com.example.newapp', # Optional. The new App Identifier of your app
  display_name: 'MyNewApp' # Optional. The new Display Name of your app
)
</code></pre>

<h3 id="fastlane_version">fastlane_version</h3>
<p>Add this to your <code>Fastfile</code> to require a certain version of <code>fastlane</code>. Use it if you use an action that just recently came out and you need it</p>
<pre><code class="ruby">fastlane_version &quot;1.50.0&quot;
</code></pre>

<h3 id="install_xcode_plugin">install_xcode_plugin</h3>
<p>Install an Xcode plugin for the current user</p>
<pre><code class="ruby">install_xcode_plugin(url: 'https://example.com/clubmate/plugin.zip')
</code></pre>

<p>You can also let <code>fastlane</code> pick the latest version of a plugin automatically, if it is hosted on GitHub</p>
<pre><code class="ruby">install_xcode_plugin(github: 'https://github.com/contentful/ContentfulXcodePlugin')
</code></pre>

<h3 id="opt_out_usage">opt_out_usage</h3>
<p>Add this your <code>Fastfile</code> to not send any data to the fastlane web service. You can also use the <code>FASTLANE_OPT_OUT_USAGE</code> environment variable. No personal data is shared, more information on <a href="https://github.com/fastlane/enhancer">https://github.com/fastlane/enhancer</a></p>
<pre><code>opt_out_usage
</code></pre>

<h3 id="rocket">rocket</h3>
<p>Print an ascii Rocket :rocket:. Useful after using <code>crashlytics</code> or <code>pilot</code> to indicate that your new build has been shipped to outer-space.</p>
<h3 id="skip_docs">skip_docs</h3>
<p>Tell <code>fastlane</code> to not automatically create a <code>fastlane/README.md</code> when running <code>fastlane</code>. You can always trigger the creation of this file manually by running <code>fastlane docs</code></p>
<h3 id="ssh">ssh</h3>
<p>Lets you execute a series of commands on a remote host, if one of the commands in command-array returns non 0 - it fails.</p>
<pre><code class="ruby">ssh(
  host: &quot;dev.januschka.com&quot;,
  username: &quot;root&quot;,
  commands: [
    &quot;date&quot;,
    &quot;echo 1 &gt; /tmp/file1&quot;
  ]
)

</code></pre>

<p>If one of the commands fails an exception is raised</p>
<p>ssh(
  host: "dev.januschka.com",
  username: "root",
  commands: [
    "date",
    "false",
    "echo 'i wont be executed'"
  ]
)</p>
<h3 id="scp">scp</h3>
<p>Allows SCP file transfer.</p>
<p><strong>Upload file/folder:</strong></p>
<pre><code class="ruby">scp(
  host: &quot;dev.januschka.com&quot;,
  username: &quot;root&quot;,
  upload: {
    src: &quot;/root/dir1&quot;,
    dst: &quot;/tmp/new_dir&quot;
  }
)
</code></pre>

<p><strong>Download file/folder:</strong></p>
<pre><code class="ruby">scp(
  host: &quot;dev.januschka.com&quot;,
  username: &quot;root&quot;,
  download: {
    src: &quot;/root/dir1&quot;,
    dst: &quot;/tmp/new_dir&quot;
  }
)
</code></pre>

<h3 id="rsync">rsync</h3>
<p>a wrapper around rsync, rsync is a tool that lets you synchronize files, including permissions and so on for a more detailed information about rsync please see <strong><em>rsync(1)</em></strong> manpage.</p>
<pre><code class="ruby">rsync(
  source: &quot;root@host:/tmp/1.txt&quot;,
  destination: &quot;/tmp/local_file.txt&quot;
)
</code></pre>

<h3 id="zip">zip</h3>
<p>Compress a file or directory</p>
<pre><code class="ruby">zip(path: &quot;MyApp.app&quot;)

zip(path: &quot;MyApp.app&quot;, output_path: &quot;Latest.app.zip&quot;)
</code></pre>

<h3 id="ifttt">ifttt</h3>
<p>Connect to the IFTTT <a href="https://ifttt.com/maker">Maker Channel</a>. An IFTTT Recipe has two components: a Trigger and an Action. In this case, the Trigger will fire every time the Maker Channel receives a web request (made by this <code>fastlane</code> action) to notify it of an event. The Action can be anything that IFTTT supports: email, SMS, etc.</p>
<pre><code class="ruby">ifttt(
  api_key: &quot;...&quot;,
  event_name: &quot;...&quot;,
  value1: &quot;foo&quot;,
  value2: &quot;bar&quot;,
  value3: &quot;baz&quot;
)
</code></pre>

<h3 id="reset_simulators">reset_simulators</h3>
<p>Reset all the iOS simulators. Useful with test actions to ensure a clean simulator.</p>
<pre><code class="ruby">reset_simulators
</code></pre>

<h3 id="danger"><a href="https://github.com/danger/danger">danger</a></h3>
<p>To run <a href="https://github.com/danger/danger">danger</a> add this to your <code>Fastfile</code></p>
<pre><code class="ruby">lane :danger do
  danger
end
</code></pre>

<h3 id="pod_lib_lint">pod_lib_lint</h3>
<p>Execute pod lib lint command</p>
<pre><code class="ruby">pod_lib_lint

# Allow ouput detail in console
pod_lib_lint(verbose: true)

# Allow warnings during pod lint
pod_lib_lint(allow_warnings: true)

# If the podspec has a dependency on another private pod, then you will have to supply the sources
pod_lib_lint(sources: ['https://github.com/MyGithubPage/Specs', 'https://github.com/CocoaPods/Specs'])
</code></pre>

<h3 id="set_pod_key">set_pod_key</h3>
<p>Adds a key to <a href="https://github.com/orta/cocoapods-keys">cocoapods-keys</a>.</p>
<pre><code class="ruby">set_pod_key(
  key: 'APIToken',
  value: '1234',
  project: 'MyProject'
)
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../FAQs/" class="btn btn-neutral float-right" title="FAQs">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../../getting-started/appstore-deployment/" class="btn btn-neutral" title="App Store Deployment"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../../getting-started/appstore-deployment/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../../FAQs/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../../js/theme.js"></script>

</body>
</html>
