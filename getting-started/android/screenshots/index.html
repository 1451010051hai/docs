<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="fastlane team">
  
  <title>Screenshots - fastlane docs</title>
  

  <link rel="shortcut icon" href="../../../img/favicon.ico">
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/highlight.css">
  <link href="../../../css/breadcrumbs.css" rel="stylesheet">
  <link href="../../../css/code.css" rel="stylesheet">
  <link href="../../../css/fabric.css" rel="stylesheet">
  <link href="../../../css/fastlane.css" rel="stylesheet">
  <link href="../../../css/sidenav.css" rel="stylesheet">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Screenshots";
    var mkdocs_page_input_path = "getting-started/android/screenshots.md";
    var mkdocs_page_url = "/getting-started/android/screenshots/";
  </script>
  
  <script src="../../../js/jquery-2.1.1.min.js"></script>
  <script src="../../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../../js/highlight.pack.js"></script>
  <script src="../../../js/theme.js"></script> 

  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-18658848-13', 'docs.fastlane.tools');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../.." class="icon icon-home"> fastlane docs</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
<li class="toctree-l1 ">
  <a class="" href="../../..">Home</a>
  
</li>
<li>
          
            <li>
<ul class="subnav">
  <li><span>Getting Started</span></li>
  
  
<ul class="subnav">
  <li><span>iOS</span></li>
  
  
<li class="toctree-l1 ">
  <a class="" href="../../ios/setup/">Setup</a>
  
</li>

  
  
<li class="toctree-l1 ">
  <a class="" href="../../ios/screenshots/">Screenshots</a>
  
</li>

  
  
<li class="toctree-l1 ">
  <a class="" href="../../ios/beta-deployment/">Beta Deployment</a>
  
</li>

  
  
<li class="toctree-l1 ">
  <a class="" href="../../ios/appstore-deployment/">App Store Deployment</a>
  
</li>

  
</ul>

  
  
<ul class="subnav">
  <li><span>Android</span></li>
  
  
<li class="toctree-l1 ">
  <a class="" href="../setup/">Setup</a>
  
</li>

  
  
<li class="toctree-l1 current">
  <a class="current" href="./">Screenshots</a>
  
  <ul>
    
      
    
      
      <li class="toctree-l3"><a href="#capture-screenshots-automatically">Capture Screenshots Automatically</a></li>
      
    
      
      <li class="toctree-l3"><a href="#upload-screenshots-to-google-play">Upload Screenshots to Google Play</a></li>
      
    
      
      <li class="toctree-l3"><a href="#use-in-fastfile">Use in Fastfile</a></li>
      
    
      
      <li class="toctree-l3"><a href="#advanced-screengrab">Advanced screengrab</a></li>
      
    
  </ul>
  
</li>

  
  
<li class="toctree-l1 ">
  <a class="" href="../beta-deployment/">Beta Deployment</a>
  
</li>

  
  
<li class="toctree-l1 ">
  <a class="" href="../release-deployment/">Release Deployment</a>
  
</li>

  
</ul>

  
</ul>
<li>
          
            <li>
<li class="toctree-l1 ">
  <a class="" href="../../../actions/">Actions</a>
  
</li>
<li>
          
            <li>
<li class="toctree-l1 ">
  <a class="" href="../../../faqs/">FAQs</a>
  
</li>
<li>
          
            <li>
<ul class="subnav">
  <li><span>Codesigning</span></li>
  
  
<li class="toctree-l1 ">
  <a class="" href="../../../codesigning/getting-started/">Getting Started</a>
  
</li>

  
  
<li class="toctree-l1 ">
  <a class="" href="../../../codesigning/xcode-project/">Xcode Project</a>
  
</li>

  
  
<li class="toctree-l1 ">
  <a class="" href="../../../codesigning/troubleshooting/">Troubleshooting</a>
  
</li>

  
  
<li class="toctree-l1 ">
  <a class="" href="../../../codesigning/common-issues/">Common Issues</a>
  
</li>

  
</ul>
<li>
          
            <li>
<ul class="subnav">
  <li><span>Plugins</span></li>
  
  
<li class="toctree-l1 ">
  <a class="" href="../../../plugins/available-plugins/">Available Plugins</a>
  
</li>

  
  
<li class="toctree-l1 ">
  <a class="" href="../../../plugins/create-plugin/">Create Your Own Plugin</a>
  
</li>

  
  
<li class="toctree-l1 ">
  <a class="" href="../../../plugins/plugins-troubleshooting/">Plugins Troubleshooting</a>
  
</li>

  
</ul>
<li>
          
            <li>
<ul class="subnav">
  <li><span>Best Practices</span></li>
  
  
<li class="toctree-l1 ">
  <a class="" href="../../../best-practices/source-control/">Source Control</a>
  
</li>

  
  
<li class="toctree-l1 ">
  <a class="" href="../../../best-practices/continuous-integration/">Continuous Integration</a>
  
</li>

  
  
<li class="toctree-l1 ">
  <a class="" href="../../../best-practices/keys/">Keys</a>
  
</li>

  
</ul>
<li>
          
            <li>
<li class="toctree-l1 ">
  <a class="" href="../../../advanced/">Advanced</a>
  
</li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../..">fastlane docs</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../..">Docs</a> &raquo;</li>
    
      
        
          <li>Getting Started &raquo;</li>
        
      
        
          <li>Android &raquo;</li>
        
      
    
    <li>Screenshots</li>

    
      <li class="wy-breadcrumbs-aside">
        <a href="https://github.com/fastlane/docs/edit/master/docs/getting-started/android/screenshots.md" class="icon icon-github" target="_blank">
          Edit on GitHub
        </a>
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="fastlane-screenshots-for-android"><em>fastlane</em> screenshots for Android</h1>
<p>Your app screenshots are probably the most important thing when it comes to convincing potential users to download or purchase your app. Unfortunately, many apps don't do screenshots well. This is often because taking screenshots of your app and then preparing them for display is time consuming, and it's hard to get everything right and consistent! For example:</p>
<ul>
<li>Are the screenshots in Google Play inconsistent with your latest app design?</li>
<li>Is your app localized into many languages that require different screenshots for each?</li>
<li>Is the same content displayed for each of your size variations?</li>
</ul>
<p><em>fastlane</em> tools can automate this process, making it fast and consistent while giving you beautiful results!</p>
<p><img alt="running screengrab" src="../../../img/getting-started/android/running-screengrab.gif" /></p>
<h1 id="capture-screenshots-automatically"><a name="user-content-capture-screenshots-automatically" href="#capture-screenshots-automatically" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Capture Screenshots Automatically</h1>
<p><em>screengrab</em> works with <em>fastlane</em> to automate the process of capturing screenshots of your app. It allows you to:</p>
<ul>
<li>Capture hundreds of screenshots in multiple languages on any simulator</li>
<li>Do something else while the computer takes the screenshots for you</li>
<li>Configure it once, and store the configuration so anyone on the team can run it</li>
<li>Get a summary of how your app looks like across all supported devices and languages</li>
</ul>
<p>After <em>screengrab</em> completes, it will show you summary of the screenshots you captured:</p>
<p><img alt="screengrab results" src="../../../img/getting-started/android/screengrab-results.png" /></p>
<h2 id="getting-started-using-espresso"><a name="user-content-getting-started-using-espresso" href="#getting-started-using-espresso" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Getting Started Using Espresso</h2>
<p><em>screengrab</em> uses the capabilities of Android's built-in <a href="https://developer.android.com/training/testing/unit-testing/instrumented-unit-tests.html">Instrumented tests</a> combined with <a href="https://developer.android.com/topic/libraries/testing-support-library/index.html#Espresso">Espresso</a> to drive interactions with your app. To get familiar with writing UI Tests with Espresso, check out <a href="http://developer.android.com/training/testing/ui-testing/espresso-testing.html">Testing UI for a Single App</a>.</p>
<h2 id="installing-screengrab"><a name="user-content-installing-screengrab" href="#installing-screengrab" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Installing <em>screengrab</em></h2>
<p>Install the gem:</p>
<pre><code>sudo gem install screengrab
</code></pre>

<h3 id="gradle-dependency"><a name="user-content-gradle-dependency" href="#gradle-dependency" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Gradle dependency</h3>
<p>Add the test dependency to your Gradle build:</p>
<pre><code class="java">androidTestCompile 'tools.fastlane:screengrab:x.x.x'
</code></pre>

<p>The latest version can be determined by visiting the <a href="https://rubygems.org/gems/screengrab"><em>screengrab</em> RubyGems page</a></p>
<h3 id="configuring-your-manifest-permissions"><a name="user-content-configuring-your-manifest-permissions" href="#configuring-your-manifest-permissions" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Configuring your Manifest Permissions</h3>
<p>Ensure that the following permissions exist in your <code>src/debug/AndroidManifest.xml</code></p>
<pre><code class="xml">&lt;!-- Allows unlocking your device and activating its screen so UI tests can succeed --&gt;
&lt;uses-permission android:name=&quot;android.permission.DISABLE_KEYGUARD&quot;/&gt;
&lt;uses-permission android:name=&quot;android.permission.WAKE_LOCK&quot;/&gt;

&lt;!-- Allows for storing and retrieving screenshots --&gt;
&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;
&lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;

&lt;!-- Allows changing locales --&gt;
&lt;uses-permission android:name=&quot;android.permission.CHANGE_CONFIGURATION&quot; /&gt;
</code></pre>

<h2 id="configuring-your-ui-tests-for-screengrab"><a name="user-content-configuring-your-ui-tests-for-screengrab" href="#configuring-your-ui-tests-for-screengrab" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Configuring your UI Tests for <em>screengrab</em></h2>
<ol>
<li>Add <code>@ClassRule public static final LocaleTestRule localeTestRule = new LocaleTestRule();</code> to your tests class to handle automatic switching of locales</li>
<li>To capture screenshots, add the following to your tests <code>Screengrab.screenshot("name_of_screenshot_here");</code> on the appropriate screens</li>
</ol>
<h2 id="generating-screenshots-with-screengrab"><a name="user-content-generating-screenshots-with-screengrab" href="#generating-screenshots-with-screengrab" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Generating Screenshots with Screengrab</h2>
<ul>
<li>Run <code>./gradlew assembleDebug assembleAndroidTest</code> to generate debug and test APKs</li>
<li>Run <code>fastlane screengrab</code> in your app project directory to generate screenshots<ul>
<li>You will be prompted to provide any required parameters which are not in your <code>Screengrabfile</code>, or provided as command line arguments</li>
</ul>
</li>
<li>Your screenshots will be saved to <code>fastlane/metadata/android</code> in the directory where you ran <code>fastlane screengrab</code></li>
</ul>
<h3 id="improved-screenshot-capture-with-ui-automator"><a name="user-content-improved-screenshot-capture-with-ui-automator" href="#improved-screenshot-capture-with-ui-automator" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Improved screenshot capture with UI Automator</h3>
<p>As of <em>screengrab</em> 0.5.0, you can specify different strategies to control the way <em>screengrab</em> captures screenshots. The newer strategy delegates to <a href="https://developer.android.com/topic/libraries/testing-support-library/index.html#UIAutomator">UI Automator</a> which fixes a number of problems compared to the original strategy:</p>
<ul>
<li>Shadows/elevation are correctly captured for Material UI</li>
<li>Multi-window situations are correctly captured (dialogs, etc.)</li>
<li>Works on Android N</li>
</ul>
<p>However, UI Automator requires a device with <strong>API level &gt;= 18</strong>, so it is not yet the default strategy. To enable it for all screenshots by default, make the following call before your tests run:</p>
<pre><code class="java">Screengrab.setDefaultScreenshotStrategy(new UiAutomatorScreenshotStrategy());
</code></pre>

<h1 id="upload-screenshots-to-google-play"><a name="user-content-upload-screenshots-to-google-play" href="#upload-screenshots-to-google-play" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Upload Screenshots to Google Play</h1>
<p>After generating your screenshots using <code>fastlane screengrab</code>, you'll usually want to upload them to Google Play.</p>
<p>To upload the screenshots stored in <code>fastlane/metadata/android</code>, just run:</p>
<pre><code class="no-highlight">fastlane supply
</code></pre>

<h1 id="use-in-fastfile"><a name="user-content-use-in-fastfile" href="#use-in-fastfile" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Use in Fastfile</h1>
<p>To put all of this together so that anyone on your team could trigger generating and uploading new screenshots, you can define a <em>fastlane</em> lane called <code>screenshots</code>. It would be responsible for:</p>
<ol>
<li>Running your app through <em>screengrab</em> to automatically capture your screenshots</li>
<li>Having <em>supply</em> send your screenshots to Google Play for use in the store</li>
</ol>
<p>Add the following code to your <code>fastlane/Fastfile</code>:</p>
<pre><code class="ruby">lane :screenshots do
  screengrab
  supply
end
</code></pre>

<p>To get a list of all available options for each of the steps, run</p>
<pre><code class="no-highlight">fastlane action screengrab
fastlane action supply
</code></pre>

<h1 id="advanced-screengrab"><a name="user-content-advanced-screengrab" href="#advanced-screengrab" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Advanced <em>screengrab</em></h1>
<p><details>
<summary>Launch Arguments</summary></p>
<p>You can provide additional arguments to your testcases on launch. These strings will be available in your tests through <code>InstrumentationRegistry.getArguments()</code>.</p>
<pre><code class="ruby">launch_arguments([
  &quot;username hjanuschka&quot;,
  &quot;build_number 201&quot;
])
</code></pre>

<pre><code class="java">Bundle extras = InstrumentationRegistry.getArguments();
String peerID = null;
if (extras != null) {
  if (extras.containsKey(&quot;username&quot;)) {
    username = extras.getString(&quot;username&quot;);
    System.out.println(&quot;Username: &quot; + username);
  } else {
    System.out.println(&quot;No username in extras&quot;);
  }
} else {
  System.out.println(&quot;No extras&quot;);
}
</code></pre>

<p></details></p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../beta-deployment/" class="btn btn-neutral float-right" title="Beta Deployment">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../setup/" class="btn btn-neutral" title="Setup"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div class="fastlane" role="contentinfo">
    <p>
      <a href="https://github.com/fastlane/fastlane" target="_blank">
        <img src="/img/fastlane_text.png" width="200" />
      </a>
      <iframe src="https://ghbtns.com/github-btn.html?user=fastlane&repo=fastlane&type=watch&count=true"
        allowtransparency="true" frameborder="0" scrolling="0" width="110" height="20" class="githubButton"></iframe>
    </p>
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a> - Copyright &copy; 2017 <a href="https://fastlane.tools">fastlane</a>
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/fastlane/docs" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../setup/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../beta-deployment/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
